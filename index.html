<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assistente FF ‚Äì M√≥dulo de Calibra√ß√£o HUD V2.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ========================================================= */
        /* VARI√ÅVEIS DE COR E ESTILO - TEMA CYBERPUNK (ROXO/CIANO)   */
        /* ========================================================= */
        :root {
            --neon-primary: #a100ff; /* Roxo Profundo */
            --neon-secondary: #00eaff; /* Ciano Vibrante */
            --bg-dark: #07061d; /* Fundo Ultra Escuro */
            --bg-card: rgba(10, 5, 20, 0.9); /* Fundo do Card */
            --bg-inactive: #1f1e33;
            --shadow-outer: 0 0 25px rgba(161, 0, 255, 0.6);
            --border-glow: 1px solid var(--neon-primary);
        }

        /* ========================================================= */
        /* ESTILOS DE LOGIN (Foco em Seguran√ßa/Profissionalismo) */
        /* ========================================================= */
        .login-screen-container { 
            height: 100vh; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            text-align: center; 
        }

        /* ANIMA√á√ÉO DE BOOT-UP SUAVE */
        @keyframes login-fade-in {
            from { opacity: 0; transform: translateY(20px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        .login-box {
            width: 90%; 
            max-width: 450px; 
            padding: 3rem; /* Aumenta o padding para mais "respiro" */
            border: 2px solid rgba(0, 234, 255, 0.6); /* Borda mais presente */
            background: rgba(10, 5, 20, 0.85); 
            backdrop-filter: blur(25px) saturate(180%); 
            -webkit-backdrop-filter: blur(25px) saturate(180%);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.4), 0 0 60px rgba(161, 0, 255, 0.4); 
            border-radius: 20px; 
            animation: login-fade-in 0.8s ease-out forwards; /* Anima√ß√£o de entrada */
            position: relative;
        }
        /* Detalhe de canto para visual de terminal/BIOS */
        .login-box::before {
            content: '[STATUS: READY]';
            position: absolute;
            top: 10px;
            left: 15px;
            font-family: monospace;
            font-size: 0.75rem;
            color: #38bdf8; /* Azul claro para status */
            opacity: 0.7;
        }

        #key-input {
            width: 100%; 
            padding: 1.2rem; /* Mais altura */
            background-color: rgba(0, 0, 0, 0.3); /* Fundo mais escuro */
            border: 2px solid var(--neon-primary); /* Borda s√≥lida */
            border-bottom: 4px solid var(--neon-secondary); /* Detalhe inferior (input ativo) */
            color: var(--neon-secondary); 
            font-size: 1.4rem; 
            text-align: center; 
            border-radius: 8px; /* Mais quadrado */
            margin-bottom: 2rem; 
            box-shadow: 0 0 10px rgba(161, 0, 255, 0.2); 
            outline: none;
            letter-spacing: 3px; /* Mais espa√ßamento para ser leg√≠vel */
            transition: all 0.3s;
            font-family: monospace; /* Fonte mono para parecer KeyCode */
            text-transform: uppercase;
        }
        #key-input::placeholder { color: rgba(0, 234, 255, 0.4); }
        #key-input:focus { 
            border-color: var(--neon-secondary); 
            background-color: rgba(0, 234, 255, 0.1); 
            box-shadow: 0 0 30px var(--neon-secondary), 0 0 10px var(--neon-primary); 
        }
        
        .key-submit-button, .key-generate-button {
            font-weight: bold; 
            padding: 1rem 1.5rem; /* Mais padding */
            border-radius: 8px; 
            transition: all 0.3s; 
            border: none;
            width: 100%; 
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .key-submit-button {
            background: var(--neon-secondary); 
            color: var(--bg-dark); 
            margin-bottom: 1rem;
            box-shadow: 0 0 15px var(--neon-secondary);
            font-size: 1.5rem;
        }
        .key-submit-button:hover:not(:disabled) { 
            box-shadow: 0 0 40px var(--neon-secondary), 0 0 10px var(--neon-primary); 
            transform: scale(1.01); 
        }
        .key-submit-button:disabled {
            background: #3f3b55; /* Cor cinza/roxa escura */
            cursor: not-allowed;
            box-shadow: none;
            color: #a0a0a0;
        }
        
        .key-generate-button {
            background: transparent; 
            color: var(--neon-primary); 
            border: 2px solid var(--neon-primary); /* Borda mais vis√≠vel */
            font-size: 1rem;
            padding: 0.8rem 1.5rem;
        }
        .key-generate-button:hover { 
            box-shadow: 0 0 20px var(--neon-primary); 
            background: rgba(161, 0, 255, 0.2); 
        }

        .error-message { 
            color: #ff3366; 
            text-shadow: 0 0 8px rgba(255, 51, 102, 1); 
            margin-top: 1.5rem; 
            font-size: 1rem; 
            font-weight: 600; 
            border-top: 1px dashed #ff3366; 
            padding-top: 1rem;
            font-family: monospace;
        }
        
        /* Estilos do Modal e do Painel Principal (Ajustados para uniformidade) */
        
        .modal-key-dialog {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.9); z-index: 100;
            display: flex; justify-content: center; align-items: center;
        }
        .modal-key-content {
            background: var(--bg-card); backdrop-filter: blur(15px);
            padding: 3rem; 
            border-radius: 16px;
            border: 3px solid var(--neon-secondary); box-shadow: 0 0 70px var(--neon-secondary)/50;
            width: 90%; max-width: 550px; text-align: center;
        }
        .key-display-container {
            display: flex; align-items: center; justify-content: space-between;
            background-color: var(--bg-inactive); 
            border: 1px solid var(--neon-secondary);
            border-radius: 8px;
            margin: 1.5rem 0;
            padding: 0.75rem; 
        }
        .key-display {
            color: var(--neon-secondary);
            font-size: 1.5rem; padding: 0.5rem; 
            font-family: monospace; letter-spacing: 3px;
            word-break: break-all;
            flex-grow: 1;
            text-align: left;
            padding-left: 1rem;
        }
        .copy-button {
            background: var(--neon-primary); color: white;
            padding: 0.75rem 1rem; border-radius: 6px; margin-left: 15px;
            transition: background 0.2s, transform 0.2s;
            text-transform: uppercase;
            font-weight: 700;
        }
        .copy-button:hover {
            background: var(--neon-secondary);
            color: var(--bg-dark);
            transform: scale(1.05);
        }

        /* ========================================================= */
        /* ESTILOS DO PAINEL E ANIMA√á√ïES (MANTIDOS) */
        /* ========================================================= */
        
        @keyframes pulse-cyan { from { box-shadow: 0 0 5px var(--neon-secondary), 0 0 10px var(--neon-secondary); } to { box-shadow: 0 0 15px var(--neon-secondary), 0 0 35px var(--neon-secondary); } }
        @keyframes section-boot-up { 0% { opacity: 0; transform: translateY(30px) scale(0.98); } 100% { opacity: 1; transform: translateY(0) scale(1); } }
        .stable-status-text { min-height: 2.5rem; white-space: normal; display: flex; align-items: center; }
        .section-enter-animation { animation: section-boot-up 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; }
        @keyframes progress-scan { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
        .progress-bar { height: 12px; background-color: var(--bg-inactive); border-radius: 6px; overflow: hidden; }
        .progress-fill { height: 100%; width: 0%; transition: width 0.4s cubic-bezier(0.23, 1, 0.32, 1); border-radius: 6px; }
        .progress-fill.active { background: var(--neon-primary); background-image: linear-gradient( 45deg, rgba(255, 255, 255, 0) 25%, rgba(255, 255, 255, 0.8) 50%, rgba(255, 255, 255, 0) 75% ); background-size: 200% 100%; animation: progress-scan 2s linear infinite; box-shadow: 0 0 10px var(--neon-primary); }
        .futuristic-theme { background-color: var(--bg-dark); color: #e0f7fa; font-family: 'Inter', sans-serif; position: relative; z-index: 1; }
        .hud-card { background-color: var(--bg-card); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); border: var(--border-glow); box-shadow: var(--shadow-outer); position: relative; overflow: hidden; border-radius: 16px; }
        .hud-card::before, .hud-card::after { content: ''; position: absolute; width: 30px; height: 30px; border: 2px solid var(--neon-secondary); z-index: 10; }
        .hud-card::before { top: -2px; left: -2px; border-right: none; border-bottom: none; transform: skewX(-15deg); opacity: 0.5; }
        .hud-card::after { bottom: -2px; right: -2px; border-left: none; border-top: none; transform: skewX(-15deg); opacity: 0.5; }
        .modern-switch { width: 60px; height: 30px; background-color: var(--bg-inactive); border-radius: 9999px; position: relative; cursor: pointer; transition: background-color 0.3s, box-shadow 0.3s; border: 2px solid var(--neon-primary)/20; }
        .modern-switch:before { content: ''; position: absolute; top: 3px; left: 3px; width: 20px; height: 20px; background-color: #e0f7fa; border-radius: 50%; transition: transform 0.3s, background-color 0.3s; box-shadow: 0 0 5px rgba(0, 0, 0, 0.5); }
        .modern-switch.active { background-color: var(--neon-secondary); animation: pulse-cyan 1.5s infinite alternate; }
        .modern-switch.active:before { transform: translateX(30px); background-color: var(--neon-primary); box-shadow: 0 0 10px var(--neon-primary); }
        .reinforced-button { border: 4px solid var(--neon-secondary); background: linear-gradient(45deg, var(--neon-primary) 0%, #ff00ff 100%); box-shadow: 0 0 15px var(--neon-primary), 0 0 30px var(--neon-primary); text-shadow: 0 0 5px rgba(0, 0, 0, 0.8); letter-spacing: 2px; }
        .reinforced-button:hover { background: var(--neon-secondary); color: var(--bg-dark) !important; border-color: var(--neon-primary); box-shadow: 0 0 30px var(--neon-secondary), 0 0 60px var(--neon-secondary); transform: scale(1.05) translateY(-2px); }
        .section-simulation-panel { display: none; }
        .neon-glow { text-shadow: 0 0 10px var(--neon-primary), 0 0 30px var(--neon-secondary); }
        
        #video-background { position: fixed; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; z-index: 0; opacity: 0.3; pointer-events: none; transition: opacity 0.5s ease-in-out; display: block; filter: brightness(0.7) blur(2px); }
        #video-background iframe { width: 100vw; height: 56.25vw; min-height: 100vh; min-width: 177.77vh; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        
        #aim-precision-slider { -webkit-appearance: none; appearance: none; width: 100%; height: 10px; border-radius: 5px; outline: none; opacity: 0.9; transition: opacity .2s; background: var(--bg-inactive); }
        #aim-precision-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 25px; height: 25px; border-radius: 50%; background: var(--neon-secondary); cursor: pointer; box-shadow: 0 0 10px var(--neon-secondary); border: 3px solid var(--bg-dark); }
        #aim-precision-slider::-moz-range-thumb { width: 25px; height: 25px; border-radius: 50%; background: var(--neon-secondary); cursor: pointer; box-shadow: 0 0 10px var(--neon-secondary); border: 3px solid var(--bg-dark); }
        
        @keyframes reticle-spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes reticle-pulse { 0% { transform: scale(1); opacity: 0.9; } 50% { transform: scale(1.1); opacity: 1; } 100% { transform: scale(1); opacity: 0.9; } }
        .reticle-spin { animation: reticle-spin linear infinite; transform-origin: 50px 50px; }
        .reticle-base { animation: reticle-pulse ease-in-out infinite; transform-origin: 50px 50px; }
        @keyframes flicker { 0%, 19.999%, 22%, 62.999%, 64%, 64.999%, 70%, 100% { opacity: 0.99; text-shadow: 0 0 5px var(--neon-secondary); } 20%, 21.999%, 63%, 63.999%, 65%, 69.999% { opacity: 0.4; text-shadow: none; } }
        #recoil-stabilizer.neon-glow { animation: flicker 4s infinite; }
        .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0; }
        
        #main-hud-panel { display: none; }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'neon-primary': 'var(--neon-primary)',
                        'neon-secondary': 'var(--neon-secondary)',
                    }
                }
            }
        }
    </script>
</head>
<body class="futuristic-theme min-h-screen font-sans p-4 md:p-8" id="main-body">
    
    <div id="video-background">
        <iframe 
            src="https://www.youtube.com/embed/1eX7l3V9xRw?autoplay=1&mute=1&loop=1&playlist=1eX7l3V9xRw&controls=0&modestbranding=1&rel=0&showinfo=0&iv_load_policy=3&start=20"
            frameborder="0"
            allow="autoplay; encrypted-media; loop"
            allowfullscreen>
        </iframe>
    </div>

    <div id="login-screen" class="login-screen-container">
        <div class="login-box">
            <h1 class="text-4xl md:text-5xl font-black tracking-tighter uppercase neon-glow text-neon-primary mb-2">
                ASSISTENTE <span class="text-neon-secondary">FF</span>
            </h1>
            <h2 class="text-xl text-gray-300 mb-8 font-light border-b-2 border-neon-secondary/30 pb-3">
                <span class="text-neon-secondary font-bold">M√ìDULO DE AUTENTICA√á√ÉO HFR-42</span>
            </h2>

            <form id="login-form" onsubmit="handleLogin(event)">
                <label for="key-input" class="block text-left text-sm font-semibold text-gray-200 mb-2">
                    üîë CHAVE DE ACESSO EXCLUSIVA:
                </label>
                <input type="text" id="key-input" placeholder="XXXXXX-YYYYYY-ZZZZZZ" required maxlength="20">
                
                <button type="submit" class="key-submit-button text-2xl">
                    <span id="login-text">CONECTAR AO SISTEMA</span>
                </button>
            </form>
            
            <button onclick="generateAndDisplayNewKey()" class="key-generate-button text-base mt-4">
                ‚ûï GERAR & SALVAR CHAVE V√ÅLIDA (7 DIAS)
            </button>

            <p id="login-error-message" class="error-message"></p>
        </div>
    </div>
    <div id="key-modal" class="modal-key-dialog hidden">
        <div class="modal-key-content">
            <h3 class="text-3xl font-bold text-neon-primary mb-4">üîë Chave de Acesso V√°lida</h3>
            <p class="text-gray-300 mb-4" id="key-modal-info">Aguardando... (Expira√ß√£o)</p>
            
            <div class="key-display-container">
                <span id="current-valid-key" class="key-display"></span>
                <button onclick="copyKeyToClipboard()" class="copy-button" id="copy-btn">
                    <span id="copy-text">üìã COPIAR</span>
                </button>
            </div>

            <p class="text-sm text-yellow-400 mt-2">AVISO: Esta chave √© armazenada apenas no seu navegador. Salve-a.</p>
            <button onclick="document.getElementById('key-modal').classList.add('hidden')" class="key-submit-button mt-4 text-lg">
                FECHAR
            </button>
        </div>
    </div>

    <div id="admin-modal" class="modal-key-dialog hidden">
        <div class="modal-key-content">
            <h3 class="text-3xl font-bold text-red-500 mb-4">üëë PAINEL DE GEST√ÉO DE CHAVES</h3>
            <p class="text-yellow-400 mb-4">ACESSO CONCEDIDO: Admin Master Key ATIVA.</p>
            
            <div class="space-y-4 text-left">
                <label class="block text-gray-200 font-bold">1. SELECIONE A DURA√á√ÉO DA NOVA KEY:</label>
                <select id="key-duration-select" class="w-full p-3 bg-gray-900/50 border border-red-500/50 rounded-lg text-neon-secondary text-lg">
                    <option value="7">7 Dias (Padr√£o)</option>
                    <option value="30">30 Dias</option>
                    <option value="365">1 Ano (365 Dias)</option>
                </select>
                
                <button onclick="adminGenerateNewKey()" class="key-submit-button bg-red-600 hover:bg-red-700 text-2xl mt-4">
                    ‚ö†Ô∏è GERAR NOVA KEY COM DURA√á√ÉO
                </button>
                <p id="admin-message" class="error-message text-center mt-2"></p>
            </div>

            <button onclick="document.getElementById('admin-modal').classList.add('hidden'); document.getElementById('login-screen').style.display = 'flex';" class="key-generate-button mt-6 text-lg">
                VOLTAR AO LOGIN
            </button>
        </div>
    </div>
    <div id="main-hud-panel" class="max-w-7xl mx-auto space-y-8 relative z-10">

        <header class="text-center pt-6 pb-4 md:pt-10">
            <h1 class="text-6xl md:text-7xl font-black tracking-tighter uppercase neon-glow text-neon-primary transition-all duration-500" id="main-title">
                Assistente FF
            </h1>
            <h2 class="text-2xl md:text-3xl font-light text-neon-secondary mt-2 transition-all duration-500">
                M√≥dulo Cyber-Calibra√ß√£o V2.0 | Status: <span class="text-green-400 font-bold">ONLINE</span>
            </h2>
            <p class="mt-4 text-base text-gray-200 max-w-4xl mx-auto hud-card py-3 px-6 rounded-xl transition-all duration-500 border-none shadow-xl flex justify-between items-center">
                <span>Clique nos controles para iniciar o diagn√≥stico e otimizar. üõ†Ô∏è</span>
                <button onclick="displayCurrentKey()" class="text-xs font-bold text-neon-secondary hover:text-white transition duration-200 ml-4">
                    [VER KEY ATUAL/EXPIRA√á√ÉO]
                </button>
            </p>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            
            <div class="md:col-span-1 space-y-8">
                <section class="hud-card p-6 md:p-8 rounded-2xl space-y-8">
                    <h3 class="text-3xl font-bold text-neon-primary border-b border-neon-primary/30 pb-3">
                        <span class="text-neon-secondary">//</span> Painel de Controle
                    </h3>

                    <div class="space-y-6"> 
                        
                        <div class="flex items-center justify-between p-3 bg-gray-900/40 rounded-lg border-l-4 border-neon-primary/50 hover:border-neon-secondary transition">
                            <label for="toggle-optimization-input" class="text-lg font-medium text-gray-100">OTIMIZA√á√ÉO DE FPS</label>
                            <input type="checkbox" id="toggle-optimization-input" class="sr-only" onchange="toggleFeature('Optimization')"> 
                            <div id="toggle-optimization" class="modern-switch" role="switch" aria-checked="false" aria-labelledby="toggle-optimization-input" onclick="document.getElementById('toggle-optimization-input').click()"></div>
                        </div>

                        <div class="flex items-center justify-between p-3 bg-gray-900/40 rounded-lg border-l-4 border-neon-primary/50 hover:border-neon-secondary transition">
                            <label for="toggle-aimguide-input" class="text-lg font-medium text-gray-100">ASSIST√äNCIA DE MIRA</label>
                            <input type="checkbox" id="toggle-aimguide-input" class="sr-only" onchange="toggleFeature('AimGuide')">
                            <div id="toggle-aimguide" class="modern-switch" role="switch" aria-checked="false" aria-labelledby="toggle-aimguide-input" onclick="document.getElementById('toggle-aimguide-input').click()"></div>
                        </div>

                        <div class="flex items-center justify-between p-3 bg-gray-900/40 rounded-lg border-l-4 border-neon-primary/50 hover:border-neon-secondary transition">
                            <label for="toggle-precision-input" class="text-lg font-medium text-gray-100">ANTI-RECOIL AVAN√áADO</label>
                            <input type="checkbox" id="toggle-precision-input" class="sr-only" onchange="toggleFeature('Precision')">
                            <div id="toggle-precision" class="modern-switch" role="switch" aria-checked="false" aria-labelledby="toggle-precision-input" onclick="document.getElementById('toggle-precision-input').click()"></div>
                        </div>

                    </div>
                </section>
                
                <section class="hud-card p-6 md:p-8 rounded-2xl space-y-4 border-neon-secondary">
                    <label for="aim-precision-slider" class="text-xl font-bold text-neon-secondary flex justify-between items-center border-b border-neon-secondary/50 pb-2">
                        <span>SELETOR DE SENSIBILIDADE (DPI)</span>
                    </label>
                    <span id="aim-precision-value" class="block text-center text-5xl font-extrabold text-neon-secondary neon-glow transition-all duration-300">50%</span>
                    <input type="range" id="aim-precision-slider" min="0" max="100" value="50" oninput="updateAimPrecision(this.value)" class="w-full">
                </section>
            </div>


            <div class="md:col-span-2 space-y-6">
                
                <h3 class="text-3xl font-bold text-neon-primary border-b border-neon-primary/30 pb-3">
                    <span class="text-neon-secondary">//</span> Diagn√≥stico em Tempo Real
                </h3>

                <div id="section-optimization" class="hud-card p-6 rounded-xl section-simulation-panel border-l-4 border-neon-primary">
                    <h4 class="text-xl font-bold mb-4 text-neon-primary">STATUS > OTIMIZA√á√ÉO_N√öCLEO</h4>
                    <div id="optimization-simulation" class="text-lg font-mono space-y-3 terminal-mono p-0 bg-transparent">
                        <div id="opt-status-text" class="stable-status-text"></div>
                        <div class="grid grid-cols-2 gap-4 text-sm pt-2 border-t border-neon-secondary/20">
                            <p>FPS ATUAL: <span id="fps-counter" class="text-3xl text-neon-secondary neon-glow font-bold">30</span></p>
                            <p class="text-right">CARGA CPU: <span class="text-green-400">0.8%</span> | RAM: <span class="text-yellow-400">75%</span></p>
                        </div>
                        <div class="progress-bar">
                            <div id="opt-progress-fill" class="progress-fill"></div>
                        </div>
                    </div>
                </div>

                <div id="section-aimguide" class="hud-card p-6 rounded-xl section-simulation-panel border-l-4 border-neon-secondary">
                    <h4 class="text-xl font-bold mb-4 text-neon-primary">STATUS > ASSIST√äNCIA_MIRA</h4>
                    <div id="aimguide-simulation" class="text-center p-6 space-y-4 terminal-mono p-0 bg-transparent">
                        <div id="aim-status-text" class="text-xl stable-status-text mx-auto"></div>
                        <div class="flex justify-center py-4">
                            <svg id="aim-reticle" class="w-24 h-24" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g class="reticle-spin">
                                    <circle cx="50" cy="50" r="45" stroke="var(--neon-primary)" stroke-width="2" stroke-dasharray="10 5" stroke-opacity="0.7"/>
                                </g>
                                <g class="reticle-base" transform="translate(50, 50) scale(1) translate(-50, -50)">
                                    <line x1="10" y1="50" x2="90" y2="50" stroke="var(--neon-secondary)" stroke-width="2"/>
                                    <line x1="50" y1="10" x2="50" y2="90" stroke="var(--neon-secondary)" stroke-width="2"/>
                                    <circle cx="50" cy="50" r="5" fill="var(--neon-secondary)"/>
                                </g>
                                <text x="50" y="55" font-size="8" text-anchor="middle" fill="var(--neon-secondary)" font-family="Consolas, Monospace">BUSCA...</text>
                            </svg>
                        </div>
                    </div>
                </div>

                <div id="section-precision" class="hud-card p-6 rounded-xl section-simulation-panel border-l-4 border-neon-primary">
                    <h4 class="text-xl font-bold mb-4 text-neon-primary">STATUS > ANTI_RECOIL</h4>
                    <div id="precision-simulation" class="text-lg font-mono space-y-3 terminal-mono p-0 bg-transparent">
                        <div id="prec-status-text" class="stable-status-text"></div>
                        <div class="grid grid-cols-2 gap-4 text-sm pt-2 border-t border-neon-secondary/20">
                            <p>DPI SELECIONADO: <span id="prec-value" class="text-3xl text-neon-secondary neon-glow font-bold">50%</span></p>
                            <div class="text-right">
                                ESTABILIDADE: 
                                <span id="recoil-stabilizer" class="text-3xl font-black text-neon-secondary transition-all duration-300 animate-pulse inline-block ml-2">
                                    [ | | ]
                                </span>
                            </div>
                        </div>
                        <div class="progress-bar">
                            <div id="prec-progress-fill" class="progress-fill"></div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div id="section-gamebutton" class="py-10 flex justify-center">
            <button id="ff-launch-button"
               onclick="openFreeFireApp()"
               class="px-8 py-4 rounded-xl text-xl md:text-2xl font-extrabold uppercase transition duration-300 reinforced-button text-white">
                ‚ñ∂Ô∏è INICIAR FREE FIRE OTIMIZADO
            </button>
        </div>

        <footer class="text-center py-8 border-t border-neon-primary/20 mt-10 text-gray-500 text-sm">
            <p>M√≥dulo de Calibra√ß√£o **HFR-42** | Vers√£o **V2.0** | &copy; 2025 Assistente FF.</p>
        </footer>

    </div>

    <script>
        
        // =========================================================
        // DEFINI√á√ïES DE SEGURAN√áA E ADMIN
        // =========================================================
        const KEY_STORAGE_ID = 'validAccessKey'; 
        const STATE_STORAGE_ID = 'ffAssistantAppState'; 
        const ADMIN_MASTER_KEY = 'ADM-123456-BOSS'; // <-- CHAVE MESTRA DE ADMIN!
        // =========================================================

        const loginScreen = document.getElementById('login-screen');
        const mainPanel = document.getElementById('main-hud-panel');
        const loginErrorMsg = document.getElementById('login-error-message');
        const loginButtonText = document.getElementById('login-text');
        const keyInput = document.getElementById('key-input');
        const slider = document.getElementById('aim-precision-slider');
        const valueDisplay = document.getElementById('aim-precision-value');
        
        let appState = {
            Optimization: false, AimGuide: false, Precision: false, AimPrecisionPercentage: 50,
        };

        // --- FUN√á√ïES DE GERA√á√ÉO E VALIDA√á√ÉO DE KEY COM EXPIRA√á√ÉO ---

        /** Gera um n√∫mero aleat√≥rio de 6 d√≠gitos. */
        function generateRandomSixDigits() {
            return Math.floor(100000 + Math.random() * 900000).toString();
        }

        /** Gera uma chave de acesso v√°lida no formato 6-6-6 e armazena com EXPIRA√á√ÉO. */
        function generateNewAccessKey(durationDays = 7) { 
            const part1 = generateRandomSixDigits();
            const part2 = generateRandomSixDigits();
            const part3 = generateRandomSixDigits();
            const newKeyString = `${part1}-${part2}-${part3}`;
            
            // C√°lculo da expira√ß√£o em milissegundos
            const expiryDate = new Date();
            expiryDate.setDate(expiryDate.getDate() + durationDays);
            
            const keyData = {
                key: newKeyString,
                expiry: expiryDate.getTime(),
                durationDays: durationDays
            };
            
            // Salva o OBJETO em formato JSON
            localStorage.setItem(KEY_STORAGE_ID, JSON.stringify(keyData)); 
            return newKeyString;
        }
        
        /** Verifica se a chave de acesso segue o padr√£o 6-6-6 num√©rico. */
        function isKeyFormatValid(key) {
            const keyRegex = /^(\d{6})-(\d{6})-(\d{6})$/;
            return keyRegex.test(key);
        }
        
        /** L√≥gica principal de Login. */
        async function handleLogin(event) {
            event.preventDefault(); 
            
            const enteredKey = keyInput.value.trim().toUpperCase();

            loginErrorMsg.textContent = '';
            loginButtonText.textContent = 'AUTENTICANDO...';
            loginButtonText.parentElement.disabled = true;

            // Simula o tempo de autentica√ß√£o para parecer mais profissional
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            // --- L√≥gica de Key de Admin ---
            if (enteredKey === ADMIN_MASTER_KEY) {
                showAdminPanel(); // Chamada para o painel de admin
                return;
            }
            // --- FIM L√≥gica de Key de Admin ---

            const storedKeyJSON = localStorage.getItem(KEY_STORAGE_ID);
            
            // 1. Verifica se existe Key e se est√° no formato JSON
            if (!storedKeyJSON) {
                loginErrorMsg.textContent = 'ERRO [COD 404]: Nenhuma Key de acesso encontrada. Gere uma nova Key v√°lida.';
                loginButtonText.textContent = 'CONECTAR AO SISTEMA';
                loginButtonText.parentElement.disabled = false;
                keyInput.value = '';
                return;
            }

            try {
                const storedKeyData = JSON.parse(storedKeyJSON);
                const storedKey = storedKeyData.key;
                const expiryTime = storedKeyData.expiry;

                // 2. Verifica a validade e a expira√ß√£o da Key
                if (enteredKey === storedKey && isKeyFormatValid(enteredKey)) {
                    if (Date.now() < expiryTime) {
                        // SUCESSO e V√ÅLIDA
                        loginScreen.style.display = 'none';
                        mainPanel.style.display = 'block';
                        document.getElementById('main-body').classList.remove('login-screen-container');
                        
                    } else {
                        // FALHA - CHAVE EXPIRADA
                        const duration = storedKeyData.durationDays;
                        loginErrorMsg.textContent = `ERRO [COD 408]: Sua Key (${duration} dias) EXPIROU. Solicite uma nova chave.`;
                        loginButtonText.textContent = 'CONECTAR AO SISTEMA';
                        loginButtonText.parentElement.disabled = false;
                        keyInput.value = '';
                    }

                } else if (!isKeyFormatValid(enteredKey)) {
                    // FALHA - FORMATO
                    loginErrorMsg.textContent = 'ERRO [COD 401]: O formato da chave est√° incorreto. Use XXXXXX-YYYYYY-ZZZZZZ.';
                    loginButtonText.textContent = 'CONECTAR AO SISTEMA';
                    loginButtonText.parentElement.disabled = false;
                    keyInput.value = '';
                    
                } else {
                     // FALHA - CHAVE ERRADA
                    loginErrorMsg.textContent = 'ERRO [COD 403]: Chave inv√°lida ou n√£o reconhecida. Tente novamente.';
                    loginButtonText.textContent = 'CONECTAR AO SISTEMA';
                    loginButtonText.parentElement.disabled = false;
                    keyInput.value = '';
                }
            } catch (e) {
                loginErrorMsg.textContent = 'ERRO DE SISTEMA [JSON]: Chave inv√°lida no armazenamento. Gere uma nova.';
                loginButtonText.textContent = 'CONECTAR AO SISTEMA';
                loginButtonText.parentElement.disabled = false;
                keyInput.value = '';
            }
        }

        /** Copia a chave do modal para a √°rea de transfer√™ncia. */
        function copyKeyToClipboard() {
            const keyElement = document.getElementById('current-valid-key');
            const key = keyElement.textContent;
            const copyBtn = document.getElementById('copy-text');

            if (key) {
                navigator.clipboard.writeText(key).then(() => {
                    copyBtn.textContent = '‚úÖ COPIADO!';
                    setTimeout(() => {
                        copyBtn.textContent = 'üìã COPIAR';
                    }, 2000);
                }).catch(err => {
                    console.error('Falha ao copiar:', err);
                    alert("Erro ao copiar. Tente selecionar a chave manualmente.");
                });
            }
        }
        
        /** Exibe um modal (popup) com a chave atualmente salva e o status de expira√ß√£o. */
        function displayCurrentKey() {
            const storedKeyJSON = localStorage.getItem(KEY_STORAGE_ID);
            const keyDisplayElement = document.getElementById('current-valid-key');
            const keyModalInfo = document.getElementById('key-modal-info');
            
            if (storedKeyJSON) {
                try {
                    const keyData = JSON.parse(storedKeyJSON);
                    const expiryDate = new Date(keyData.expiry);
                    
                    keyDisplayElement.textContent = keyData.key;
                    
                    const formattedDate = expiryDate.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit', year: 'numeric' });
                    
                    if (Date.now() >= keyData.expiry) {
                         keyModalInfo.innerHTML = `STATUS: <span class="text-red-500 font-bold">EXPIRADA!</span> (Era de ${keyData.durationDays} dias)`;
                    } else {
                         keyModalInfo.innerHTML = `DURA√á√ÉO: ${keyData.durationDays} dias | V√°lida at√©: <span class="text-neon-secondary font-bold">${formattedDate}</span>`;
                    }

                } catch (e) {
                     keyDisplayElement.textContent = 'Erro ao processar Key. Gere uma nova.';
                     keyModalInfo.textContent = '';
                }
            } else {
                keyDisplayElement.textContent = 'Nenhuma chave v√°lida encontrada. Gere uma nova Key.';
                keyModalInfo.textContent = '';
            }
            document.getElementById('key-modal').classList.remove('hidden');
        }
        
        /** Gera e exibe a nova chave de acesso. */
        function generateAndDisplayNewKey() {
            const newKey = generateNewAccessKey(7); // Gera√ß√£o padr√£o de 7 dias
            
            displayCurrentKey(); // Atualiza o modal com a nova info de expira√ß√£o
            
            loginErrorMsg.textContent = 'Nova Key de 7 dias gerada e salva no seu navegador. Use-a para fazer o Login.';
        }

        // --- FUN√á√ïES DE ADMIN ---
        function showAdminPanel() {
            loginScreen.style.display = 'none'; 
            mainPanel.style.display = 'none';   
            document.getElementById('admin-modal').classList.remove('hidden'); 
            
            document.getElementById('admin-message').textContent = '';
        }

        function adminGenerateNewKey() {
            const select = document.getElementById('key-duration-select');
            const durationDays = parseInt(select.value);
            
            // Gera a nova chave com a dura√ß√£o selecionada
            const newKey = generateNewAccessKey(durationDays); 
            
            // Feedback no modal de admin
            const adminMsg = document.getElementById('admin-message');
            adminMsg.textContent = `‚úÖ NOVA KEY GERADA: ${newKey} (Dura√ß√£o: ${durationDays} dias)`;
            adminMsg.style.color = '#00eaff'; // Ciano para sucesso
            adminMsg.style.textShadow = '0 0 5px rgba(0, 234, 255, 0.8)';
        }
        // --- FIM FUN√á√ïES DE ADMIN ---

        /** L√≥gica de Inicializa√ß√£o. */
        function checkLoginStatus() {
            let currentKey = localStorage.getItem(KEY_STORAGE_ID);
            
            if (!currentKey || !isKeyFormatValid(currentKey)) {
                // Gera a primeira chave se n√£o existir (7 dias)
                generateNewAccessKey(7);
            }
            
            keyInput.value = ''; 
            
            loginScreen.style.display = 'flex';
            mainPanel.style.display = 'none';
            document.getElementById('main-body').classList.add('login-screen-container');

            loadAppState(); // Carrega o estado persistente do HUD
            initializeApp();
        }

        // --- FUN√á√ïES DE PERSIST√äNCIA (SALVAR/CARREGAR ESTADO) ---

        /** Salva o estado atual (toggles e slider) no localStorage. */
        function saveAppState() {
            appState.AimPrecisionPercentage = parseInt(document.getElementById('aim-precision-slider').value);
            
            try {
                const stateJSON = JSON.stringify(appState);
                localStorage.setItem(STATE_STORAGE_ID, stateJSON);
            } catch (e) {
                console.error("Erro ao salvar o estado no localStorage", e);
            }
        }

        /** Carrega o estado da aplica√ß√£o do localStorage e o aplica ao HUD. */
        function loadAppState() {
            try {
                const storedState = localStorage.getItem(STATE_STORAGE_ID);
                if (storedState) {
                    const loadedState = JSON.parse(storedState);
                    
                    appState = { ...appState, ...loadedState };

                    const slider = document.getElementById('aim-precision-slider');
                    if (slider) {
                        slider.value = appState.AimPrecisionPercentage || 50;
                        updateAimPrecision(slider.value, true); 
                    }
                    
                    ['Optimization', 'AimGuide', 'Precision'].forEach(feature => {
                        const inputId = `toggle-${feature.toLowerCase()}-input`;
                        const inputElement = document.getElementById(inputId);
                        
                        if (inputElement) {
                            const shouldBeActive = appState[feature];
                            
                            if (inputElement.checked !== shouldBeActive) {
                                inputElement.checked = shouldBeActive;
                                toggleFeature(feature, true); // O 'true' evita salvar novamente ao carregar
                            }
                        }
                    });
                    return true;
                }
            } catch (e) {
                console.error("Erro ao carregar o estado do localStorage", e);
            }
            return false;
        }
        // --- FIM FUN√á√ïES DE PERSIST√äNCIA ---

        // --- FUN√á√ïES DE SIMULA√á√ÉO DO PAINEL ---

        function updateStatusText(element, text) { element.textContent = text; }
        function clearStatusText(element) { element.textContent = ''; }
        function restartAnimation(element) { element.classList.remove('section-enter-animation'); void element.offsetWidth; element.classList.add('section-enter-animation'); }

        // Simula o lan√ßamento do aplicativo Free Fire
        function openFreeFireApp() {
            const isiOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
            const isAndroid = /Android/.test(navigator.userAgent);
            const deepLinkUri = "garenafreefire://";
            const fallbackUrlAndroid = "https://play.google.com/store/apps/details?id=com.dts.freefireth";
            const fallbackUrliOS = "https://apps.apple.com/app/free-fire-battlegrounds/id1300146617";
            
            window.location.href = deepLinkUri;
            setTimeout(() => {
                if (isiOS) { window.location.href = fallbackUrliOS; } 
                else if (isAndroid) { window.location.href = fallbackUrlAndroid; } 
                else { window.location.href = fallbackUrlAndroid; }
            }, 500);
        }

        async function startOptimizationSim() {
            const statusTextElement = document.getElementById('opt-status-text');
            const progressBar = document.getElementById('opt-progress-fill');
            const fpsCounter = document.getElementById('fps-counter'); 
            
            clearStatusText(statusTextElement); progressBar.style.width = '0%'; progressBar.classList.add('active'); fpsCounter.textContent = '30'; 
            
            const steps = [
                { delay: 0, progress: 0, text: 'PROCESSANDO | Iniciando varredura de n√∫cleo...', fps: 30 },
                { delay: 1000, progress: 30, text: 'EXECUTANDO | Limpando cache de fundo de RAM... [OK]', fps: 45 },
                { delay: 2000, progress: 65, text: 'EXECUTANDO | Ajustando prioridade de n√∫cleo da CPU...', fps: 55 },
                { delay: 3500, progress: 95, text: 'EXECUTANDO | Alocando banda de rede para Free Fire...', fps: 58 },
                { delay: 4000, progress: 100, text: 'CONCLU√çDO | Otimiza√ß√£o de sistema finalizada. Desempenho m√°ximo ATIVO.', fps: 60 },
            ];
            
            let accumulatedDelay = 0;
            for (const step of steps) {
                if (!appState.Optimization) return; 
                await new Promise(resolve => setTimeout(resolve, step.delay - accumulatedDelay));
                accumulatedDelay = step.delay;
                updateStatusText(statusTextElement, step.text);
                progressBar.style.width = step.progress + '%';
                fpsCounter.style.transition = 'text-shadow 0.3s, color 0.3s';
                fpsCounter.textContent = step.fps; 
                fpsCounter.classList.add('neon-glow');
                setTimeout(() => fpsCounter.classList.remove('neon-glow'), 150);
            }
            progressBar.classList.remove('active');
        }
        
        async function startAimGuideSim() {
            const statusTextElement = document.getElementById('aim-status-text');
            const reticleElement = document.getElementById('aim-reticle');
            
            clearStatusText(statusTextElement);
            
            const spinGroup = reticleElement.querySelector('.reticle-spin');
            const pulseGroup = reticleElement.querySelector('.reticle-base');
            const textElement = reticleElement.querySelector('text');

            spinGroup.style.animation = 'reticle-spin 0.5s linear infinite';
            pulseGroup.style.animation = 'reticle-pulse 0.5s ease-in-out infinite';
            textElement.textContent = 'BUSCA...';
            textElement.setAttribute('fill', 'var(--neon-secondary)');
            
            updateStatusText(statusTextElement, 'PROCESSANDO | Iniciando varredura de sensibilidade...');
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            if (!appState.AimGuide) return;
            updateStatusText(statusTextElement, 'EXECUTANDO | Ajustando par√¢metros de DPI e Sensibilidade (360¬∞)...');
            spinGroup.style.animation = 'reticle-spin 1.5s linear infinite';
            pulseGroup.style.animation = 'reticle-pulse 1.2s ease-in-out infinite';
            textElement.textContent = 'CALIBRANDO';
            await new Promise(resolve => setTimeout(resolve, 3000));
            
            if (!appState.AimGuide) return;
            updateStatusText(statusTextElement, 'CONCLU√çDO | MIRA ASSISTIDA ATIVA! Sistema pronto para o jogo.');
            spinGroup.style.animation = 'none';
            pulseGroup.style.animation = 'none';
            textElement.textContent = 'LOCK';
            textElement.setAttribute('fill', 'var(--neon-primary)');
        }

        async function startPrecisionSim() {
            const statusTextElement = document.getElementById('prec-status-text');
            const progressBar = document.getElementById('prec-progress-fill');
            const stabilizer = document.getElementById('recoil-stabilizer'); 
            const precValueDisplay = document.getElementById('prec-value');
            const currentPrecision = document.getElementById('aim-precision-value').textContent; 
            
            clearStatusText(statusTextElement); progressBar.style.width = '0%'; progressBar.classList.add('active'); 
            stabilizer.classList.add('animate-pulse'); stabilizer.classList.remove('neon-glow'); stabilizer.textContent = '[ | | ]'; 
            precValueDisplay.textContent = currentPrecision; 
            
            const simulationSteps = [
                { text: `PROCESSANDO | Analisando o controle de Recoil para: ${currentPrecision}`, progress: 0, stabilizer: '[ | | ]', wait: 500 },
                { text: 'EXECUTANDO | Inicializando algoritmo Anti-Recoil (Fase 1/3)...', progress: 30, stabilizer: '[ > < ]', wait: 1500 },
                { text: 'EXECUTANDO | An√°lise de Dispers√£o de Proj√©teis em tempo real...', progress: 60, stabilizer: '[ > | < ]', wait: 1500 },
                { text: 'EXECUTANDO | Configurando estabilidade do girosc√≥pio (Anti-Vibra√ß√£o)...', progress: 90, stabilizer: '[ | | ]', wait: 1000 },
                { text: `CONCLU√çDO | Ajustes Finais executados. Recoil otimizado em ${currentPrecision}.`, progress: 100, stabilizer: '[ LOCK ]', wait: 0 },
            ];
            
            for (const step of simulationSteps) {
                if (!appState.Precision) return; 
                await new Promise(resolve => setTimeout(resolve, step.wait));
                updateStatusText(statusTextElement, step.text);
                progressBar.style.width = step.progress + '%';
                stabilizer.textContent = step.stabilizer;
            }
            
            progressBar.classList.remove('active');
            stabilizer.classList.add('neon-glow');
            stabilizer.classList.remove('animate-pulse');
        }
        
        // --- FUN√á√ïES DE CONTROLE DE UI/ESTADO ---

        function updateSliderVisual(value) {
            const percentage = value + '%';
            slider.style.background = `linear-gradient(to right, var(--neon-secondary) ${percentage}, var(--bg-inactive) ${percentage})`;
        }

        function updateAimPrecision(value, isLoad = false) {
            appState.AimPrecisionPercentage = parseInt(value);
            valueDisplay.textContent = `${appState.AimPrecisionPercentage}%`;
            
            const precValueDisplay = document.getElementById('prec-value');
            if(precValueDisplay) { precValueDisplay.textContent = `${appState.AimPrecisionPercentage}%`; }
            
            updateSliderVisual(appState.AimPrecisionPercentage);

            if (!isLoad) { 
                saveAppState();
            }
        }

        function toggleFeature(feature, isLoad = false) {
            const inputId = `toggle-${feature.toLowerCase()}-input`;
            const inputElement = document.getElementById(inputId);
            
            const willBeActive = inputElement.checked; 
            appState[feature] = willBeActive;

            if (!isLoad) { 
                saveAppState();
            }

            const toggleId = `toggle-${feature.toLowerCase()}`;
            const toggleElement = document.getElementById(toggleId);

            if (toggleElement) {
                toggleElement.classList.toggle('active', willBeActive);
                toggleElement.setAttribute('aria-checked', willBeActive);
            }

            const sectionId = `section-${feature.toLowerCase()}`;
            const sectionElement = document.getElementById(sectionId);

            if (sectionElement) {
                const statusTextId = `${feature.toLowerCase().slice(0, 4)}-status-text`;
                const statusTextElement = document.getElementById(statusTextId);

                if (willBeActive) {
                    sectionElement.style.display = 'block';
                    restartAnimation(sectionElement);
                    
                    switch (feature) {
                        case 'Optimization': startOptimizationSim(); break;
                        case 'AimGuide': startAimGuideSim(); break;
                        case 'Precision': startPrecisionSim(); break;
                    }
                } else {
                    sectionElement.style.display = 'none'; 
                    clearStatusText(statusTextElement);
                    
                    if (feature === 'Optimization' && document.getElementById('opt-progress-fill')) {
                         document.getElementById('opt-progress-fill').classList.remove('active');
                         document.getElementById('fps-counter').textContent = '30';
                    }
                    if (feature === 'Precision' && document.getElementById('prec-progress-fill')) {
                         document.getElementById('prec-progress-fill').classList.remove('active');
                         const stabilizer = document.getElementById('recoil-stabilizer');
                         stabilizer.textContent = '[ | | ]';
                         stabilizer.classList.remove('neon-glow');
                         stabilizer.classList.add('animate-pulse');
                    }
                    if (feature === 'AimGuide' && document.getElementById('aim-reticle')) {
                        const reticleElement = document.getElementById('aim-reticle');
                        reticleElement.querySelector('.reticle-spin').style.animation = 'none';
                        reticleElement.querySelector('.reticle-base').style.animation = 'none';
                        reticleElement.querySelector('text').textContent = 'BUSCA...'; 
                        reticleElement.querySelector('text').setAttribute('fill', 'var(--neon-secondary)');
                    }
                }
            }
        }

        function initializeApp() {
            if (slider && valueDisplay) { updateAimPrecision(appState.AimPrecisionPercentage, true); }
        }

        // Chama a fun√ß√£o de verifica√ß√£o de login ao carregar
        document.addEventListener('DOMContentLoaded', checkLoginStatus);

    </script>
</body>
</html>
