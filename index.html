<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assistente FF ‚Äì M5.0 (Completo)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* ========================================================= */
        /* VARI√ÅVEIS DE COR E ESTILO - TEMA CYBERPUNK (ROXO/CIANO)   */
        /* ========================================================= */
        :root {
            --neon-primary: #a100ff; /* Roxo Profundo */
            --neon-secondary: #00eaff; /* Ciano Vibrante */
            --bg-dark: #07061d; /* Fundo Ultra Escuro */
            --bg-card: rgba(10, 5, 20, 0.9); /* Fundo do Card */
            --bg-inactive: #1f1e33;
            --shadow-primary: 0 0 25px rgba(161, 0, 255, 0.6);
            --shadow-secondary: 0 0 25px rgba(0, 234, 255, 0.6);
            --border-glow: 1px solid var(--neon-primary);
        }

        /* ========================================================= */
        /* ESTILOS GERAIS E FUNDO */
        /* ========================================================= */
        .futuristic-theme { 
            background-color: var(--bg-dark); 
            color: #e0f7fa; 
            font-family: 'Inter', sans-serif; 
            position: relative; 
            min-height: 100vh;
        }

        /* Fundo de V√≠deo e Efeito de Matriz */
        #video-background { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; 
            z-index: 0; opacity: 0.3; pointer-events: none; filter: brightness(0.7) blur(2px); 
        }
        #video-background iframe { 
            width: 100vw; height: 56.25vw; min-height: 100vh; min-width: 177.77vh; 
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
        }

        /* Efeito de Scanline/Matrix */
        .matrix-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: 1;
            background-image: repeating-linear-gradient(
                to bottom,
                rgba(0, 0, 0, 0.05), 
                rgba(0, 0, 0, 0.5) 1px,
                transparent 1px,
                transparent 2px
            ),
            linear-gradient(
                to bottom, 
                rgba(7, 6, 29, 0.3), 
                rgba(7, 6, 29, 1)
            );
            pointer-events: none;
        }

        /* ========================================================= */
        /* ESTILOS DO PAINEL CENTRAL (HUD) */
        /* ========================================================= */
        .main-panel-container {
            position: relative;
            z-index: 10;
            padding-top: 5rem;
            padding-bottom: 5rem;
            display: flex;
            justify-content: center;
        }

        .hud-frame {
            width: 100%;
            max-width: 900px;
            padding: 2rem;
            background-color: var(--bg-card);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(161, 0, 255, 0.4);
            border-radius: 20px;
            box-shadow: var(--shadow-primary);
            position: relative;
            animation: boot-up 0.8s ease-out forwards;
        }

        @keyframes boot-up {
            from { opacity: 0; transform: translateY(50px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .hud-frame::before {
            content: '';
            position: absolute;
            top: -5px; bottom: -5px; left: -5px; right: -5px;
            border-radius: 25px;
            background: linear-gradient(45deg, var(--neon-primary), var(--neon-secondary), var(--neon-primary));
            background-size: 400% 400%;
            z-index: -1;
            opacity: 0.8;
            filter: blur(15px);
            transition: all 0.5s ease-in-out;
            animation: border-glow-animate 5s infinite alternate;
        }

        @keyframes border-glow-animate {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .neon-title {
            text-shadow: 0 0 15px var(--neon-primary), 0 0 35px var(--neon-secondary);
        }

        .module-box {
            padding: 1.5rem;
            background-color: rgba(30, 30, 50, 0.7);
            border-radius: 12px;
            border-left: 5px solid var(--neon-primary);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        /* --- ESTILOS DE STATUS E ANIMA√á√ÉO --- */
        .status-message {
            min-height: 1.5rem; 
            margin-top: 0.5rem;
            padding-top: 0.25rem;
            border-top: 1px dashed rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
            color: #94a3b8;
            font-weight: 500;
        }

        .status-message.active {
            color: #10b981; 
            text-shadow: 0 0 5px rgba(16, 185, 129, 0.5);
            animation: status-text-pulse 2s infinite alternate;
        }

        .status-message.status-activating {
            color: var(--neon-secondary); 
            text-shadow: 0 0 8px var(--neon-secondary);
            font-style: italic;
            animation: calibration-pulse 0.7s infinite steps(2);
        }

        @keyframes status-text-pulse {
            from { opacity: 1; }
            to { opacity: 0.8; }
        }

        @keyframes calibration-pulse {
            0% { content: 'CALIBRANDO [||||]...'; opacity: 1; }
            50% { content: 'CALIBRANDO [//]...'; opacity: 0.9; }
            100% { content: 'CALIBRANDO [||||]...'; opacity: 1; }
        }
        /* ------------------------------------ */

        /* Estilos dos Toggles Modernos */
        .modern-switch {
            width: 60px; height: 30px; 
            background-color: var(--bg-inactive); 
            border-radius: 9999px; position: relative; cursor: pointer; 
            transition: background-color 0.3s, box-shadow 0.3s; 
            border: 2px solid var(--neon-primary)/20;
        }
        .modern-switch:before {
            content: ''; position: absolute; top: 3px; left: 3px; 
            width: 20px; height: 20px; background-color: #e0f7fa; 
            border-radius: 50%; transition: transform 0.3s, background-color 0.3s; 
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }
        .modern-switch.active {
            background-color: var(--neon-secondary); 
            box-shadow: 0 0 15px var(--neon-secondary); 
        }
        .modern-switch.active:before {
            transform: translateX(30px); 
            background-color: var(--neon-primary); 
            box-shadow: 0 0 10px var(--neon-primary);
        }

        /* Estilos de Hz (Exclusividade) */
        .hz-button {
            padding: 0.75rem;
            background-color: rgba(30, 30, 50, 0.7);
            border: 1px solid rgba(161, 0, 255, 0.3);
            border-radius: 8px;
            color: #e0f7fa;
            font-weight: 600;
            transition: all 0.2s;
        }

        .hz-button:hover {
            background-color: rgba(0, 234, 255, 0.1);
            color: var(--neon-secondary);
        }

        .hz-button.active {
            background: linear-gradient(135deg, var(--neon-secondary), var(--neon-primary));
            color: var(--bg-dark);
            font-weight: bold;
            box-shadow: 0 0 15px var(--neon-secondary);
            border-color: var(--neon-primary);
            transform: scale(1.05);
        }
        
        /* Estilos Removidos ou Simplificados para o tema */
        .ping-display {
            font-size: 3rem;
            font-weight: bold;
            color: var(--neon-secondary);
            text-shadow: 0 0 10px var(--neon-secondary);
        }
        .status-secure {
            color: #00ff99;
            font-weight: bold;
            text-shadow: 0 0 5px rgba(0, 255, 153, 0.6);
            font-family: monospace;
        }
        #dpi-slider { 
            -webkit-appearance: none; appearance: none; width: 100%; height: 10px; 
            border-radius: 5px; outline: none; transition: opacity .2s; 
            background: var(--bg-inactive); 
        }
        #dpi-slider::-webkit-slider-thumb { 
            -webkit-appearance: none; appearance: none; width: 25px; height: 25px; 
            border-radius: 50%; background: var(--neon-secondary); cursor: pointer; 
            box-shadow: 0 0 10px var(--neon-secondary); border: 3px solid var(--bg-dark); 
        }
        .activate-button {
            background: linear-gradient(90deg, #ff00ff 0%, var(--neon-primary) 100%);
            color: white;
            padding: 1rem 3rem;
            font-size: 1.5rem;
            font-weight: bold;
            border-radius: 15px;
            border: 3px solid var(--neon-secondary);
            box-shadow: 0 0 20px #ff00ff, 0 0 40px var(--neon-primary);
            transition: all 0.3s;
            text-shadow: 0 0 5px black;
        }
        .activate-button:hover {
            background: linear-gradient(90deg, var(--neon-secondary) 0%, #00eaff 100%);
            color: var(--bg-dark);
            border-color: var(--neon-primary);
            box-shadow: 0 0 30px var(--neon-secondary), 0 0 60px var(--neon-secondary);
            transform: scale(1.02);
        }
        .key-info-footer {
            background-color: rgba(30, 30, 50, 0.7);
            padding: 0.75rem;
            border-radius: 10px;
            font-family: monospace;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .key-text {
            color: var(--neon-secondary);
            font-size: 1rem;
            letter-spacing: 1px;
        }
        .copy-key-icon {
            color: white;
            background: var(--neon-primary);
            padding: 0.5rem;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.8rem;
        }
        .copy-key-icon:hover {
            background: var(--neon-secondary);
            color: var(--bg-dark);
            box-shadow: 0 0 10px var(--neon-secondary);
        }
        .login-screen-container { 
            height: 100vh; display: flex; justify-content: center; align-items: center; text-align: center; 
        }
        @keyframes login-fade-in {
            from { opacity: 0; transform: translateY(20px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        .login-box {
            width: 90%; max-width: 450px; padding: 3rem; 
            border: 2px solid rgba(0, 234, 255, 0.6); 
            background: rgba(10, 5, 20, 0.85); 
            backdrop-filter: blur(25px) saturate(180%); 
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.4), 0 0 60px rgba(161, 0, 255, 0.4); 
            border-radius: 20px; 
            animation: login-fade-in 0.8s ease-out forwards; 
            position: relative;
        }
        .login-box::before {
            content: '[STATUS: READY]';
            position: absolute; top: 10px; left: 15px; font-family: monospace; font-size: 0.75rem; color: #38bdf8; opacity: 0.7;
        }
        #key-input {
            width: 100%; padding: 1.2rem; background-color: rgba(0, 0, 0, 0.3); 
            border: 2px solid var(--neon-primary); border-bottom: 4px solid var(--neon-secondary); 
            color: var(--neon-secondary); font-size: 1.4rem; text-align: center; border-radius: 8px; 
            margin-bottom: 2rem; box-shadow: 0 0 10px rgba(161, 0, 255, 0.2); outline: none;
            letter-spacing: 3px; transition: all 0.3s; font-family: monospace; text-transform: uppercase;
        }
        #key-input:focus { 
            border-color: var(--neon-secondary); background-color: rgba(0, 234, 255, 0.1); 
            box-shadow: 0 0 30px var(--neon-secondary), 0 0 10px var(--neon-primary); 
        }
        .key-submit-button {
            font-weight: bold; padding: 1rem 1.5rem; border-radius: 8px; transition: all 0.3s; border: none;
            width: 100%; text-transform: uppercase; letter-spacing: 1px;
            background: var(--neon-secondary); color: var(--bg-dark); box-shadow: 0 0 15px var(--neon-secondary);
            font-size: 1.5rem;
        }
        .key-submit-button:hover:not(:disabled) { 
            box-shadow: 0 0 40px var(--neon-secondary), 0 0 10px var(--neon-primary); 
            transform: scale(1.01); 
        }
        .key-submit-button:disabled {
            background: #3f3b55; cursor: not-allowed; box-shadow: none; color: #a0a0a0;
        }
        .error-message { 
            color: #ff3366; text-shadow: 0 0 8px rgba(255, 51, 102, 1); margin-top: 1.5rem; 
            font-size: 1rem; font-weight: 600; border-top: 1px dashed #ff3366; padding-top: 1rem;
            font-family: monospace;
        }
        .modal-key-dialog {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.9); z-index: 100;
            display: flex; justify-content: center; align-items: center;
        }
        .modal-key-content {
            background: var(--bg-card); backdrop-filter: blur(15px);
            padding: 3rem; border-radius: 16px;
            border: 3px solid var(--neon-secondary); box-shadow: 0 0 70px var(--neon-secondary)/50;
            width: 90%; max-width: 550px; text-align: center;
        }
        .key-display-container {
            display: flex; align-items: center; justify-content: space-between;
            background-color: var(--bg-inactive); border: 1px solid var(--neon-secondary);
            border-radius: 8px; margin: 1.5rem 0; padding: 0.75rem; 
        }
        .key-display {
            color: var(--neon-secondary); font-size: 1.5rem; padding: 0.5rem; 
            font-family: monospace; letter-spacing: 3px; word-break: break-all;
            flex-grow: 1; text-align: left; padding-left: 1rem;
        }
        .copy-button {
            background: var(--neon-primary); color: white; padding: 0.75rem 1rem; 
            border-radius: 6px; margin-left: 15px; transition: background 0.2s, transform 0.2s;
            text-transform: uppercase; font-weight: 700;
        }
        .copy-button:hover {
            background: var(--neon-secondary); color: var(--bg-dark); transform: scale(1.05);
        }
        .key-generate-button {
            background: transparent; color: var(--neon-primary); border: 2px solid var(--neon-primary); 
            font-size: 1rem; padding: 0.8rem 1.5rem; border-radius: 8px; transition: all 0.3s;
        }
        .key-generate-button:hover { 
            box-shadow: 0 0 20px var(--neon-primary); background: rgba(161, 0, 255, 0.2); 
        }

        #main-hud-panel { display: none; }
    </style>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'neon-primary': 'var(--neon-primary)',
                        'neon-secondary': 'var(--neon-secondary)',
                    }
                }
            }
        }
    </script>
</head>
<body class="futuristic-theme" id="main-body">
    
    <div id="video-background">
        <iframe 
            src="https://www.youtube.com/embed/1eX7l3V9xRw?autoplay=1&mute=1&loop=1&playlist=1eX7l3V9xRw&controls=0&modestbranding=1&rel=0&showinfo=0&iv_load_policy=3&start=20"
            frameborder="0"
            allow="autoplay; encrypted-media; loop"
            allowfullscreen>
        </iframe>
    </div>
    <div class="matrix-overlay"></div>

    <div id="login-screen" class="login-screen-container">
        <div class="login-box">
            <h1 class="text-4xl md:text-5xl font-black tracking-tighter uppercase neon-glow text-neon-primary mb-2">
                ASSISTENTE <span class="text-neon-secondary">FF</span>
            </h1>
            <h2 class="text-xl text-gray-300 mb-8 font-light border-b-2 border-neon-secondary/30 pb-3">
                <span class="text-neon-secondary font-bold">M√ìDULO DE AUTENTICA√á√ÉO HFR-42</span>
            </h2>

            <form id="login-form">
                <label for="key-input" class="block text-left text-sm font-semibold text-gray-200 mb-2">
                    üîë CHAVE DE ACESSO EXCLUSIVA:
                </label>
                <input type="text" id="key-input" placeholder="XXXXXX-YYYYYY-ZZZZZZ" required maxlength="20">
                
                <button type="submit" class="key-submit-button text-2xl">
                    <span id="login-text">CONECTAR AO SISTEMA</span>
                </button>
            </form>
            
            <p id="login-error-message" class="error-message"></p>
        </div>
    </div>
    
    <div id="key-modal" class="modal-key-dialog hidden" role="dialog" aria-modal="true" aria-labelledby="key-modal-title">
        <div class="modal-key-content">
            <h3 class="text-3xl font-bold text-neon-primary mb-4" id="key-modal-title">üîë STATUS DA CHAVE DE ACESSO</h3>
            
            <p class="text-gray-300 mb-4" id="key-modal-info">Verificando expira√ß√£o...</p>
            
            <div class="key-display-container">
                <span id="current-valid-key" class="key-display">CHAVE N√ÉO ENCONTRADA</span>
                <button id="copy-key-modal-btn" class="copy-button" aria-label="Copiar chave de acesso">
                    <span id="copy-text">üìã COPIAR</span>
                </button>
            </div>

            <p class="text-sm text-yellow-400 mt-2">AVISO: Esta chave est√° vinculada a este dispositivo/navegador at√© a data de expira√ß√£o.</p>
            <button id="close-key-modal-btn" class="key-submit-button mt-4 text-lg" aria-label="Fechar di√°logo de status da chave">
                FECHAR
            </button>
        </div>
    </div>

    <div id="admin-modal" class="modal-key-dialog hidden" role="dialog" aria-modal="true" aria-labelledby="admin-modal-title">
        <div class="modal-key-content">
            <h3 class="text-3xl font-bold text-red-500 mb-4" id="admin-modal-title">üëë PAINEL DE GEST√ÉO DE CHAVES</h3>
            <p class="text-yellow-400 mb-4">ACESSO CONCEDIDO: Admin Master Key ATIVA.</p>
            
            <div class="space-y-4 text-left">
                <label for="key-duration-select" class="block text-gray-200 font-bold">1. SELECIONE A DURA√á√ÉO DA NOVA KEY (Para o cliente):</label>
                <select id="key-duration-select" class="w-full p-3 bg-gray-900/50 border border-red-500/50 rounded-lg text-neon-secondary text-lg">
                    <option value="7">7 Dias (Padr√£o)</option>
                    <option value="15">15 Dias</option>
                    <option value="30">30 Dias</option>
                </select>
                
                <button id="admin-generate-btn" class="key-submit-button bg-red-600 hover:bg-red-700 text-2xl mt-4" aria-label="Gerar nova chave de acesso com dura√ß√£o selecionada">
                    ‚ö†Ô∏è GERAR NOVA KEY COM DURA√á√ÉO
                </button>
                <p id="admin-message" class="error-message text-center mt-2"></p>
                <p class="text-xs text-gray-500 text-center">A nova chave ser√° automaticamente copiada para sua √°rea de transfer√™ncia.</p>
            </div>

            <button id="admin-logout-btn" class="key-generate-button mt-6 text-lg bg-red-800 hover:bg-red-900 border-none !text-white !p-3" aria-label="Sair do modo administrador">
                SAIR DO MODO ADMIN
            </button>
        </div>
    </div>

    <div id="main-hud-panel" class="main-panel-container">
        <div class="hud-frame">
            <header class="text-center mb-10">
                <h1 class="text-5xl font-black uppercase neon-title text-neon-primary">
                    ASSISTENTE <span class="text-neon-secondary">FF</span>
                </h1>
                <h2 class="text-xl font-light text-gray-300 mt-2">
                    M√ìDULO DE OTIMIZA√á√ÉO E ASSIST√äNCIA V4.0
                </h2>
            </header>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                
                <div>
                    <h3 class="text-2xl font-bold text-neon-secondary mb-4 border-b border-neon-secondary/50 pb-2">FUN√á√ïES EXCLUSIVAS</h3>

                    <div class="module-box flex flex-col justify-between mb-4">
                        <div class="flex items-center justify-between">
                            <label for="toggle-optimization-input" class="text-xl font-medium text-gray-100">Otimiza√ß√£o de Ping</label>
                            <input type="checkbox" id="toggle-optimization-input" class="sr-only"> 
                            <div id="toggle-optimization" class="modern-switch" role="switch" aria-checked="false" aria-label="Ativar Otimiza√ß√£o de Ping"></div>
                        </div>
                        <p id="status-optimization" class="status-message"></p>
                    </div>

                    <div class="module-box flex flex-col justify-between mb-4">
                        <div class="flex items-center justify-between">
                            <label for="toggle-precision-input" class="text-xl font-medium text-gray-100">Anti-Recoil Avan√ßado</label>
                            <input type="checkbox" id="toggle-precision-input" class="sr-only"> 
                            <div id="toggle-precision" class="modern-switch" role="switch" aria-checked="false" aria-label="Ativar Anti-Recoil Avan√ßado"></div>
                        </div>
                        <p id="status-precision" class="status-message"></p>
                    </div>

                    <div class="module-box flex flex-col justify-between mb-8">
                        <div class="flex items-center justify-between">
                            <label for="toggle-aimguide-input" class="text-xl font-medium text-gray-100">Assist√™ncia de Mira (AimGuide)</label>
                            <input type="checkbox" id="toggle-aimguide-input" class="sr-only"> 
                            <div id="toggle-aimguide" class="modern-switch" role="switch" aria-checked="false" aria-label="Ativar Assist√™ncia de Mira (AimGuide)"></div>
                        </div>
                        <p id="status-aimguide" class="status-message"></p>
                    </div>
                    
                    <h3 class="text-xl font-bold text-neon-primary mb-3">SELE√á√ÉO DE DPI: <span id="dpi-value" class="text-neon-secondary">50%</span></h3>
                    <input type="range" id="dpi-slider" min="0" max="100" value="50" class="w-full" aria-label="Controle deslizante de sele√ß√£o de DPI">
                </div>

                <div class="space-y-6">
                    
                    <div class="module-box border-l-4 border-neon-secondary">
                        <h3 class="text-2xl font-bold text-neon-secondary mb-4 border-b border-neon-secondary/50 pb-2">TAXA DE ATUALIZA√á√ÉO (HZ)</h3>
                        
                        <div class="grid grid-cols-2 gap-3 mt-4" id="hz-selection-group">
                            <button class="hz-button" data-hz="60" id="hz-60">60 Hz (Padr√£o)</button>
                            <button class="hz-button" data-hz="90" id="hz-90">90 Hz</button>
                            <button class="hz-button" data-hz="120" id="hz-120">120 Hz (Avan√ßado)</button>
                            <button class="hz-button" data-hz="144" id="hz-144">144 Hz (M√°ximo)</button>
                        </div>
                        <p id="hz-status-message" class="status-message mt-3 text-sm text-center"></p>
                    </div>
                    
                    <div class="module-box border-l-4 border-neon-primary">
                        <h4 class="text-lg font-bold text-neon-primary mb-3">DIAGN√ìSTICO EM TEMPO REAL</h4>
                        <p class="text-xl font-medium text-gray-100 mb-2">STATUS CONEX√ÉO</p>
                        <div class="flex items-center justify-between">
                            <svg class="w-1/3 h-12" viewBox="0 0 100 50" preserveAspectRatio="none" style="filter: drop-shadow(0 0 5px rgba(0, 234, 255, 0.5));" role="img" aria-label="Gr√°fico de flutua√ß√£o de Ping">
                                <polyline id="ping-graph" fill="none" stroke="var(--neon-secondary)" stroke-width="2" points="0,40 10,25 20,35 30,15 40,30 50,20 60,35 70,10 80,30 90,20 100,40"/>
                            </svg>
                            <p class="ping-display"><span id="ping-counter">15</span><span class="text-xl ml-1">MS</span></p>
                        </div>
                    </div>
                    
                    <div class="module-box border-l-4 border-neon-primary">
                        <h4 class="text-lg font-bold text-neon-primary mb-3">DETEC√á√ÉO DE ERROS (V.O.L.S)</h4>
                        <div id="vols-status" class="text-sm stable-status-text min-h-[5rem] text-gray-300 font-mono" role="status">
                            VARREDURA COMPLETA. 0 ERROS ENCUDANDO. 
                            <br><span class="status-secure">SYSTEM STATUS: SECURE.</span>
                        </div>
                    </div>

                </div>
            </div>
            
            <div class="text-center my-10">
                <button id="activate-launch-btn" class="activate-button uppercase" aria-label="Ativar modifica√ß√µes e iniciar o jogo Free Fire">
                    ATIVAR MODS E INICIAR JOGO
                </button>
            </div>
            
            <div class="key-info-footer">
                <span id="key-display-text" class="key-text">KEY: [AUTENTICANDO...]</span>
                <button id="display-key-btn" class="copy-key-icon" aria-label="Ver data de expira√ß√£o da chave atual">
                    <span id="copy-text-footer">VER EXPIRA√á√ÉO</span>
                </button>
            </div>
            
        </div>
    </div>

    <script>
        // =========================================================
        // VARI√ÅVEIS DE CONFIGURA√á√ÉO E DOM
        // =========================================================
        const KEY_STORAGE_ID = 'validAccessKey'; 
        const STATE_STORAGE_ID = 'ffAssistantAppState'; 
        const ADMIN_MASTER_KEY = 'ADM-123456-BOSS'; 

        // Mapeamento dos Elementos DOM (D)
        const D = {
            loginForm: document.getElementById('login-form'),
            keyInput: document.getElementById('key-input'),
            loginScreen: document.getElementById('login-screen'),
            mainPanel: document.getElementById('main-hud-panel'),
            mainBody: document.getElementById('main-body'),
            loginErrorMsg: document.getElementById('login-error-message'),
            loginButtonText: document.getElementById('login-text'),
            dpiSlider: document.getElementById('dpi-slider'),
            dpiValue: document.getElementById('dpi-value'),
            keyModal: document.getElementById('key-modal'),
            adminModal: document.getElementById('admin-modal'),
            volsStatus: document.getElementById('vols-status'),
            pingCounter: document.getElementById('ping-counter'),
            pingGraph: document.getElementById('ping-graph'),
            hzGroup: document.getElementById('hz-selection-group'),
            hzStatusMsg: document.getElementById('hz-status-message'),

            // Bot√µes
            copyKeyModalBtn: document.getElementById('copy-key-modal-btn'),
            closeKeyModalBtn: document.getElementById('close-key-modal-btn'),
            adminGenerateBtn: document.getElementById('admin-generate-btn'),
            adminLogoutBtn: document.getElementById('admin-logout-btn'),
            activateLaunchBtn: document.getElementById('activate-launch-btn'),
            displayKeyBtn: document.getElementById('display-key-btn'),
            
            // Toggles Containers, Inputs e Status Messages
            toggleOptimization: document.getElementById('toggle-optimization'),
            inputOptimization: document.getElementById('toggle-optimization-input'),
            statusOptimization: document.getElementById('status-optimization'),
            
            togglePrecision: document.getElementById('toggle-precision'),
            inputPrecision: document.getElementById('toggle-precision-input'),
            statusPrecision: document.getElementById('status-precision'),
            
            toggleAimguide: document.getElementById('toggle-aimguide'),
            inputAimguide: document.getElementById('toggle-aimguide-input'),
            statusAimguide: document.getElementById('status-aimguide'),
        };

        let appState = {
            Optimization: false, AimGuide: false, Precision: false, 
            AimPrecisionPercentage: 50, 
            ScreenHz: 60 
        };
        let pingInterval;

        // Mapeamento para mensagens de status e elementos
        const featureMap = {
            Optimization: { input: D.inputOptimization, toggle: D.toggleOptimization, status: D.statusOptimization, msg: 'Calibrando rota de pacotes...' },
            Precision: { input: D.inputPrecision, toggle: D.togglePrecision, status: D.statusPrecision, msg: 'Ajustando compensa√ß√£o de recuo...' },
            AimGuide: { input: D.inputAimguide, toggle: D.toggleAimguide, status: D.statusAimguide, msg: 'Iniciando calibra√ß√£o de mira...' },
        };


        // =========================================================
        // FUN√á√ïES GERAIS DE UTILIDADE
        // =========================================================

        function generateRandomSixDigits() {
            return Math.floor(100000 + Math.random() * 900000).toString();
        }

        function generateNewAccessKey(durationDays = 7) { 
            const part1 = generateRandomSixDigits();
            const part2 = generateRandomSixDigits();
            const part3 = generateRandomSixDigits();
            const newKeyString = `${part1}-${part2}-${part3}`;
            
            const expiryDate = new Date();
            expiryDate.setDate(expiryDate.getDate() + durationDays);
            
            const keyData = {
                key: newKeyString,
                expiry: expiryDate.getTime(),
                durationDays: durationDays
            };
            
            localStorage.setItem(KEY_STORAGE_ID, JSON.stringify(keyData)); 
            return newKeyString;
        }

        function isKeyFormatValid(key) {
            const keyRegex = /^(\d{6})-(\d{6})-(\d{6})$/;
            return keyRegex.test(key);
        }

        // =========================================================
        // L√ìGICA DE LOGIN E AUTENTICA√á√ÉO
        // =========================================================

        async function handleLogin(event) {
            event.preventDefault(); 
            
            const enteredKey = D.keyInput.value.trim().toUpperCase();

            D.loginErrorMsg.textContent = '';
            D.loginButtonText.textContent = 'AUTENTICANDO...';
            D.loginButtonText.parentElement.disabled = true;

            await new Promise(resolve => setTimeout(resolve, 1500));
            
            if (enteredKey === ADMIN_MASTER_KEY) {
                D.keyInput.value = '';
                showAdminPanel();
                return;
            }

            const storedKeyJSON = localStorage.getItem(KEY_STORAGE_ID);
            let keyMatches = false;
            let isExpired = true;

            if (storedKeyJSON) {
                try {
                    const storedKeyData = JSON.parse(storedKeyJSON);
                    
                    if (enteredKey === storedKeyData.key) {
                        keyMatches = true;
                        if (Date.now() < storedKeyData.expiry) {
                            isExpired = false;
                        }
                    }
                } catch (e) {
                    localStorage.removeItem(KEY_STORAGE_ID);
                }
            }
            
            if (!keyMatches && isKeyFormatValid(enteredKey)) {
                 // Simula√ß√£o de entrega de nova chave
                 const keyData = {
                     key: enteredKey,
                     expiry: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).getTime(), 
                     durationDays: 7
                 };
                 localStorage.setItem(KEY_STORAGE_ID, JSON.stringify(keyData));
                 
                 completeLogin();
                 return;
            }

            if (keyMatches && !isExpired) {
                completeLogin();
                return;
            }

            if (keyMatches && isExpired) {
                D.loginErrorMsg.textContent = 'ERRO [COD 408]: Sua Key EXPIROU. Solicite uma nova chave.';
                localStorage.removeItem(KEY_STORAGE_ID); 
            } else {
                D.loginErrorMsg.textContent = 'ERRO [COD 403]: Chave inv√°lida, expirada ou n√£o reconhecida. Tente novamente.';
            }

            D.loginButtonText.textContent = 'CONECTAR AO SISTEMA';
            D.loginButtonText.parentElement.disabled = false;
            D.keyInput.value = '';
        }

        function completeLogin() {
            D.loginScreen.style.display = 'none';
            D.mainPanel.style.display = 'flex';
            D.mainBody.classList.remove('login-screen-container');
            
            loadAppState(); 
            initializeApp();
            updateKeyInfoInFooter(); 
        }

        function checkLoginStatus() {
            const storedKeyJSON = localStorage.getItem(KEY_STORAGE_ID);
            
            if (storedKeyJSON) {
                try {
                    const storedKeyData = JSON.parse(storedKeyJSON);
                    
                    if (Date.now() < storedKeyData.expiry) {
                        completeLogin(); 
                        return;
                    } else {
                        localStorage.removeItem(KEY_STORAGE_ID); 
                    }
                } catch (e) {
                    localStorage.removeItem(KEY_STORAGE_ID);
                }
            }
            
            D.keyInput.value = ''; 
            D.loginScreen.style.display = 'flex';
            D.mainPanel.style.display = 'none';
            D.mainBody.classList.add('login-screen-container');

            loadAppState(); 
            initializeApp();
        }

        // =========================================================
        // GEST√ÉO DO ESTADO (APP STATE), TOGGLES E HZ
        // =========================================================

        function saveAppState() {
            appState.AimPrecisionPercentage = parseInt(D.dpiSlider.value);
            try {
                localStorage.setItem(STATE_STORAGE_ID, JSON.stringify(appState));
            } catch (e) { console.error("Erro ao salvar estado", e); }
        }

        function loadAppState() {
            try {
                const storedState = localStorage.getItem(STATE_STORAGE_ID);
                if (storedState) {
                    const loadedState = JSON.parse(storedState);
                    appState = { ...appState, ...loadedState };

                    if (D.dpiSlider) {
                        D.dpiSlider.value = appState.AimPrecisionPercentage || 50;
                        updateDPI(D.dpiSlider.value, true); 
                    }
                    
                    ['Optimization', 'AimGuide', 'Precision'].forEach(feature => {
                        const elementData = featureMap[feature];
                        if (elementData && elementData.input) {
                            elementData.input.checked = appState[feature];
                            updateToggleDisplay(feature, true);
                        }
                    });

                    updateHzSelection(appState.ScreenHz, true); 

                }
            } catch (e) { console.error("Erro ao carregar estado", e); }
        }

        function updateDPI(value, isLoad = false) {
            appState.AimPrecisionPercentage = parseInt(value);
            D.dpiValue.textContent = `${appState.AimPrecisionPercentage}%`;
            
            const percentage = value + '%';
            D.dpiSlider.style.background = `linear-gradient(to right, var(--neon-secondary) ${percentage}, var(--bg-inactive) ${percentage})`;

            if (!isLoad) { saveAppState(); }
        }

        function handleToggleClick(event) {
            const toggleElement = event.currentTarget;
            let feature = '';
            
            switch (toggleElement.id) {
                case 'toggle-optimization': feature = 'Optimization'; break;
                case 'toggle-precision': feature = 'Precision'; break;
                case 'toggle-aimguide': feature = 'AimGuide'; break;
                default: return;
            }

            const elementData = featureMap[feature];
            const inputElement = elementData.input;

            if (inputElement) {
                inputElement.checked = !inputElement.checked; 
                appState[feature] = inputElement.checked;
                
                updateToggleDisplay(feature);
                updateVolsStatus();
                saveAppState();
            }
        }

        function updateToggleDisplay(feature, isLoad = false) {
            const elementData = featureMap[feature];
            const isActive = elementData.input.checked;

            elementData.toggle.classList.toggle('active', isActive);
            elementData.toggle.setAttribute('aria-checked', isActive);
            
            // L√ìGICA DE ANIMA√á√ÉO/STATUS
            if (isActive) {
                elementData.status.textContent = elementData.msg;
                elementData.status.classList.add('status-activating');
                elementData.status.classList.remove('active');

                // Simula calibra√ß√£o por 2 segundos
                setTimeout(() => {
                    elementData.status.textContent = `‚úÖ ${feature} ATIVO.`;
                    elementData.status.classList.remove('status-activating');
                    elementData.status.classList.add('active');
                }, isLoad ? 0 : 2000); 
            } else {
                elementData.status.textContent = 'Fun√ß√£o desativada.';
                elementData.status.classList.remove('active', 'status-activating');
            }
        }

        function updateHzSelection(selectedHz, isLoad = false) {
            const buttons = D.hzGroup.querySelectorAll('.hz-button');
            let found = false;

            buttons.forEach(button => {
                const hzValue = parseInt(button.getAttribute('data-hz'));
                const isActive = (hzValue === selectedHz);
                button.classList.toggle('active', isActive);
                
                if (isActive) {
                    D.hzStatusMsg.textContent = `üñ•Ô∏è Otimizado para ${hzValue} Hz.`;
                    D.hzStatusMsg.classList.add('active');
                    found = true;
                }
            });
            
            if (!found) {
                D.hzStatusMsg.textContent = 'Selecione uma taxa de atualiza√ß√£o.';
                D.hzStatusMsg.classList.remove('active');
            }

            if (!isLoad) {
                appState.ScreenHz = selectedHz;
                saveAppState();
            }
        }

        function handleHzClick(event) {
            const button = event.target.closest('.hz-button');
            if (button) {
                const newHz = parseInt(button.getAttribute('data-hz'));
                
                if (appState.ScreenHz === newHz) {
                    updateHzSelection(0); 
                } else {
                    updateHzSelection(newHz);
                }
            }
        }


        function updateVolsStatus() {
            const activeCount = ['Optimization', 'AimGuide', 'Precision'].filter(feature => appState[feature]).length;
            
            if (activeCount > 0) {
                D.volsStatus.innerHTML = `MODOS ATIVOS: ${activeCount}. DIAGN√ìSTICO EM CURSO. 
                <br><span class="text-yellow-400">STATUS: CUIDADO AO INICIAR.</span>`;
            } else {
                D.volsStatus.innerHTML = `VARREDURA COMPLETA. 0 ERROS ENCUDANDO. 
                <br><span class="status-secure">SYSTEM STATUS: SECURE.</span>`;
            }
        }

        // =========================================================
        // FUNCIONALIDADES DE KEY E MODAIS
        // =========================================================

        function copyKeyToClipboard() {
            const keyElement = document.getElementById('current-valid-key');
            const key = keyElement.textContent;
            const copyBtnText = document.getElementById('copy-text');

            if (key && key !== 'CHAVE N√ÉO ENCONTRADA') {
                navigator.clipboard.writeText(key).then(() => {
                    copyBtnText.textContent = '‚úÖ COPIADO!';
                    setTimeout(() => { copyBtnText.textContent = 'üìã COPIAR'; }, 2000);
                }).catch(err => {
                    alert("Erro ao copiar.");
                });
            }
        }

        function updateKeyInfoInFooter() {
            const storedKeyJSON = localStorage.getItem(KEY_STORAGE_ID);
            const keyFooter = document.getElementById('key-display-text');
            const keyData = storedKeyJSON ? JSON.parse(storedKeyJSON) : null;

            if (keyData && keyData.key) {
                const expiryDate = new Date(keyData.expiry);
                const formattedDate = expiryDate.toLocaleDateString('pt-BR');
                
                keyFooter.innerHTML = `KEY: ${keyData.key} (EXP: <span class="text-neon-primary">${formattedDate}</span>)`;
            } else {
                keyFooter.textContent = 'KEY: [N/A] (FA√áA LOGIN)';
            }
        }

        function displayCurrentKey() {
            const storedKeyJSON = localStorage.getItem(KEY_STORAGE_ID);
            const keyDisplayElement = document.getElementById('current-valid-key');
            const keyModalInfo = document.getElementById('key-modal-info');
            
            if (storedKeyJSON) {
                try {
                    const keyData = JSON.parse(storedKeyJSON);
                    const expiryDate = new Date(keyData.expiry);
                    keyDisplayElement.textContent = keyData.key;
                    
                    const formattedDate = expiryDate.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit', year: 'numeric' });
                    
                    if (Date.now() >= keyData.expiry) {
                         keyModalInfo.innerHTML = `STATUS: <span class="text-red-500 font-bold">EXPIRADA!</span>`;
                    } else {
                         keyModalInfo.innerHTML = `DURA√á√ÉO: ${keyData.durationDays} dias | V√°lida at√©: <span class="text-neon-secondary font-bold">${formattedDate}</span>`;
                    }
                } catch (e) {
                     keyDisplayElement.textContent = 'Erro ao processar Key.';
                     keyModalInfo.textContent = '';
                }
            } else {
                keyDisplayElement.textContent = 'CHAVE N√ÉO ENCONTRADA';
                keyModalInfo.innerHTML = '<span class="text-red-500 font-bold">Status: N√£o logado.</span>';
            }
            D.keyModal.classList.remove('hidden');
        }

        function closeKeyModal() {
            D.keyModal.classList.add('hidden');
        }

        // --- ADMIN ---
        function showAdminPanel() {
            D.loginScreen.style.display = 'none'; 
            D.mainPanel.style.display = 'none';   
            D.adminModal.classList.remove('hidden'); 
            document.getElementById('admin-message').textContent = '';
        }

        function handleAdminLogout() {
            D.adminModal.classList.add('hidden'); 
            D.loginScreen.style.display = 'flex';
        }

        function adminGenerateNewKey() {
            const select = document.getElementById('key-duration-select');
            const durationDays = parseInt(select.value);
            
            const newKey = generateNewAccessKey(durationDays); 
            
            const adminMsg = document.getElementById('admin-message');
            adminMsg.textContent = `‚úÖ NOVA KEY GERADA: ${newKey} (Dura√ß√£o: ${durationDays} dias). COPIADA!`;
            adminMsg.style.color = '#00eaff'; 
            adminMsg.style.textShadow = '0 0 5px rgba(0, 234, 255, 0.8)';
            
            navigator.clipboard.writeText(newKey);
        }

        // =========================================================
        // FUNCIONALIDADES DE SIMULA√á√ÉO E INICIALIZA√á√ÉO
        // =========================================================

        function startPingSim() {
            let history = Array(11).fill(40); 

            clearInterval(pingInterval);

            pingInterval = setInterval(() => {
                const currentPing = Math.floor(Math.random() * (40 - 10) + 10);
                D.pingCounter.textContent = currentPing;
                
                const normalizedHeight = 50 - ((currentPing - 10) / 30) * 40; 
                
                history.shift();
                history.push(normalizedHeight);
                
                const points = history.map((h, i) => `${i * 10},${h}`).join(' ');
                D.pingGraph.setAttribute('points', points);

            }, 800);
        }

        function activateModsAndLaunch() {
            const activeCount = Object.values(appState).filter(val => val === true).length;
            let hzInfo = appState.ScreenHz > 0 ? ` + HZ: ${appState.ScreenHz}Hz` : '';

            if (activeCount > 0 || appState.ScreenHz > 0) {
                alert(`ATIVANDO: ${activeCount} MODS ${hzInfo}. INICIANDO FREE FIRE OTIMIZADO...`);
            } else {
                alert("Nenhuma fun√ß√£o ativada. Iniciando Free Fire normalmente...");
            }
            
            const deepLinkUri = "garenafreefire://";
            window.location.href = deepLinkUri;
        }

        function initializeApp() {
            if (D.dpiSlider && D.dpiValue) { updateDPI(appState.AimPrecisionPercentage, true); }
            startPingSim(); 
            updateVolsStatus();
        }

        // =========================================================
        // REGISTRO DE EVENT LISTENERS (Centraliza√ß√£o)
        // =========================================================

        document.addEventListener('DOMContentLoaded', checkLoginStatus);

        // Login
        if (D.loginForm) D.loginForm.addEventListener('submit', handleLogin);

        // Toggles de Fun√ß√µes
        if (D.toggleOptimization) D.toggleOptimization.addEventListener('click', handleToggleClick);
        if (D.togglePrecision) D.togglePrecision.addEventListener('click', handleToggleClick);
        if (D.toggleAimguide) D.toggleAimguide.addEventListener('click', handleToggleClick);

        // Slider DPI
        if (D.dpiSlider) D.dpiSlider.addEventListener('input', (e) => updateDPI(e.target.value));

        // Event Listener para o grupo de bot√µes Hz
        if (D.hzGroup) D.hzGroup.addEventListener('click', handleHzClick);

        // Bot√µes Principais e Rodap√©
        if (D.activateLaunchBtn) D.activateLaunchBtn.addEventListener('click', activateModsAndLaunch);
        if (D.displayKeyBtn) D.displayKeyBtn.addEventListener('click', displayCurrentKey);

        // Bot√µes do Modal KEY
        if (D.copyKeyModalBtn) D.copyKeyModalBtn.addEventListener('click', copyKeyToClipboard);
        if (D.closeKeyModalBtn) D.closeKeyModalBtn.addEventListener('click', closeKeyModal);

        // Bot√µes do Modal Admin
        if (D.adminGenerateBtn) D.adminGenerateBtn.addEventListener('click', adminGenerateNewKey);
        if (D.adminLogoutBtn) D.adminLogoutBtn.addEventListener('click', handleAdminLogout);
    </script>
</body>
</html>
