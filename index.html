<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assistente FF ‚Äì M√≥dulo de Calibra√ß√£o HUD V10</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ========================================================= */
        /* VARI√ÅVEIS DE COR E ESTILO - TEMA CYBERPUNK (ROXO/CIANO)   */
        /* ========================================================= */
        :root {
            --neon-primary: #a100ff; /* Roxo Profundo/Magenta (Base de Cor) */
            --neon-secondary: #00eaff; /* Ciano/Aqua Vibrante (Destaque e Ativa√ß√£o) */
            --bg-dark: #07061d; /* Fundo Ultra Escuro */
            --bg-card: rgba(10, 5, 20, 0.9); /* Fundo do Card (Vidro Fosco Mais Escuro) */
            --bg-inactive: #1f1e33; /* Fundo Inativo dos Controles */
            --shadow-inner: inset 0 0 10px rgba(0, 234, 255, 0.15); /* Sombra interna Ciano */
            --shadow-outer: 0 0 25px rgba(161, 0, 255, 0.6); /* Sombra externa Roxo (Mais forte) */
            --border-glow: 1px solid var(--neon-primary); /* Borda prim√°ria */
        }

        /* 1. Efeito de Anima√ß√£o de Brilho (Toggles e Bot√£o) */
        @keyframes pulse-cyan {
            from { box-shadow: 0 0 5px var(--neon-secondary), 0 0 10px var(--neon-secondary); }
            to { box-shadow: 0 0 15px var(--neon-secondary), 0 0 35px var(--neon-secondary); }
        }

        /* 2. ANIMA√á√ÉO DE ENTRADA (BOOT-UP) */
        @keyframes section-boot-up {
            0% { opacity: 0; transform: translateY(30px) scale(0.98); }
            100% { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        /* 3. CLASSE DE TEXTO EST√ÅVEL (ANTIGA .typing-text REMOVIDA) */
        .stable-status-text {
            /* CORRE√á√ÉO APLICADA: For√ßa m√∫ltiplas linhas e garante altura m√≠nima. */
            min-height: 2.5rem; /* Aumentado para garantir 2 linhas completas */
            white-space: normal;
        }

        .section-enter-animation {
            animation: section-boot-up 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }
        
        /* 4. ANIMA√á√ÉO DA BARRA DE PROGRESSO (SCAN LINE) */
        @keyframes progress-scan {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        /* Estilo da Barra de Progresso e Preenchimento */
        .progress-bar {
            height: 12px;
            background-color: var(--bg-inactive);
            border-radius: 6px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            width: 0%;
            transition: width 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            border-radius: 6px;
        }
        .progress-fill.active {
            background: var(--neon-primary); 
            background-image: linear-gradient(
                45deg, 
                rgba(255, 255, 255, 0) 25%, 
                rgba(255, 255, 255, 0.8) 50%, 
                rgba(255, 255, 255, 0) 75%
            );
            background-size: 200% 100%; 
            animation: progress-scan 2s linear infinite; 
            box-shadow: 0 0 10px var(--neon-primary); 
        }
        
        /* 5. Estilo B√°sico do Corpo e Fundo */
        .futuristic-theme {
            background-color: var(--bg-dark);
            color: #e0f7fa; 
            font-family: 'Inter', sans-serif;
            position: relative;
            z-index: 1; 
        }
        
        /* 6. ESTILO DE CART√ÉO DE DIAGN√ìSTICO (HUD CONTAINER) */
        .hud-card {
            background-color: var(--bg-card);
            backdrop-filter: blur(15px); 
            -webkit-backdrop-filter: blur(15px);
            border: var(--border-glow); 
            box-shadow: var(--shadow-outer);
            position: relative;
            overflow: hidden;
            border-radius: 16px;
        }
        
        /* Efeito de corte nos cantos (simulado por pseudo-elementos) */
        .hud-card::before, .hud-card::after {
            content: '';
            position: absolute;
            width: 30px;
            height: 30px;
            border: 2px solid var(--neon-secondary);
            z-index: 10;
        }
        /* Canto Superior Esquerdo */
        .hud-card::before {
            top: -2px;
            left: -2px;
            border-right: none;
            border-bottom: none;
            transform: skewX(-15deg); 
            opacity: 0.5;
        }
        /* Canto Inferior Direito */
        .hud-card::after {
            bottom: -2px;
            right: -2px;
            border-left: none;
            border-top: none;
            transform: skewX(-15deg);
            opacity: 0.5;
        }

        /* 7. ESTILO DOS Toggles */
        .modern-switch.active {
            background-color: var(--neon-secondary);
            animation: pulse-cyan 1.5s infinite alternate; 
        }
        .modern-switch.active:before {
            transform: translateX(30px);
            background-color: var(--neon-primary); 
            box-shadow: 0 0 10px var(--neon-primary);
        }
        .modern-switch {
            width: 60px;
            height: 30px;
            background-color: var(--bg-inactive);
            border-radius: 9999px;
            position: relative;
            cursor: pointer;
            transition: background-color 0.3s, box-shadow 0.3s;
            border: 2px solid var(--neon-primary)/20; 
        }
        .modern-switch:before {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 20px; 
            height: 20px;
            background-color: #e0f7fa;
            border-radius: 50%;
            transition: transform 0.3s, background-color 0.3s;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }

        /* 8. Estilo do Slider */
        #aim-precision-slider::-webkit-slider-thumb {
            box-shadow: 0 0 15px var(--neon-secondary), 0 0 5px var(--bg-dark);
        }
        #aim-precision-slider::-moz-range-thumb {
            box-shadow: 0 0 15px var(--neon-secondary), 0 0 5px var(--bg-dark);
        }

        /* 9. Bot√£o de Lan√ßamento Refor√ßado */
        .reinforced-button {
            border: 4px solid var(--neon-secondary);
            background: linear-gradient(45deg, var(--neon-primary) 0%, #ff00ff 100%);
            box-shadow: 0 0 15px var(--neon-primary), 0 0 30px var(--neon-primary);
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.8);
            letter-spacing: 2px;
        }
        .reinforced-button:hover {
            background: var(--neon-secondary);
            color: var(--bg-dark) !important;
            border-color: var(--neon-primary);
            box-shadow: 0 0 30px var(--neon-secondary), 0 0 60px var(--neon-secondary);
            transform: scale(1.05) translateY(-2px);
        }
        
        /* 10. ESCONDE AS SE√á√ïES DE SIMULA√á√ÉO POR PADR√ÉO */
        .section-simulation-panel {
            display: none;
        }
        
        /* Outros estilos de Slider e Fundo */
        .neon-glow {
            text-shadow: 0 0 10px var(--neon-primary), 0 0 30px var(--neon-secondary);
        }
        #video-background {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; z-index: 0; opacity: 0.3; pointer-events: none; 
            transition: opacity 0.5s ease-in-out; display: block; filter: brightness(0.7) blur(2px);
        }
        #video-background iframe {
            width: 100vw; height: 56.25vw; min-height: 100vh; min-width: 177.77vh; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
        }
        #aim-precision-slider {
            -webkit-appearance: none; appearance: none; width: 100%; height: 10px; border-radius: 5px; outline: none; opacity: 0.9; transition: opacity .2s; background: var(--bg-inactive);
        }
        #aim-precision-slider::-webkit-slider-thumb {
            -webkit-appearance: none; appearance: none; width: 25px; height: 25px; border-radius: 50%; background: var(--neon-secondary); cursor: pointer; box-shadow: 0 0 10px var(--neon-secondary); border: 3px solid var(--bg-dark); 
        }
        #aim-precision-slider::-moz-range-thumb {
            width: 25px; height: 25px; border-radius: 50%; background: var(--neon-secondary); cursor: pointer; box-shadow: 0 0 10px var(--neon-secondary); border: 3px solid var(--bg-dark);
        }

        /* ========================================================= */
        /* ADI√á√ïES CRUCIAIS PARA AS ANIMA√á√ïES JS (Ret√≠culo e Estabilizador) */
        /* ========================================================= */

        /* 11. ANIMA√á√ÉO DO RET√çCULO SVG (Calibra√ß√£o de Mira) */
        @keyframes reticle-spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        @keyframes reticle-pulse {
            0% { transform: scale(1); opacity: 0.9; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 0.9; }
        }
        .reticle-spin {
            animation: reticle-spin linear infinite;
            transform-origin: 50px 50px;
        }
        .reticle-base {
            animation: reticle-pulse ease-in-out infinite;
            transform-origin: 50px 50px;
        }

        /* 12. ESTILO PARA O ESTABILIZADOR (ANTI-RECOIL) */
        @keyframes flicker {
            0%, 19.999%, 22%, 62.999%, 64%, 64.999%, 70%, 100% {
                opacity: 0.99;
                text-shadow: 0 0 5px var(--neon-secondary);
            }
            20%, 21.999%, 63%, 63.999%, 65%, 69.999% {
                opacity: 0.4;
                text-shadow: none;
            }
        }
        #recoil-stabilizer.neon-glow {
            animation: flicker 4s infinite;
        }

    </style>
    <script>
        // Configura√ß√£o do Tailwind (Usa Inter como fonte)
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'neon-primary': 'var(--neon-primary)',
                        'neon-secondary': 'var(--neon-secondary)',
                    }
                }
            }
        }
    </script>
</head>
<body class="futuristic-theme min-h-screen font-sans p-4 md:p-8" id="main-body">
    
    <div id="video-background">
        <iframe 
            src="https://www.youtube.com/embed/1eX7l3V9xRw?autoplay=1&mute=1&loop=1&playlist=1eX7l3V9xRw&controls=0&modestbranding=1&rel=0&showinfo=0&iv_load_policy=3&start=20"
            frameborder="0"
            allow="autoplay; encrypted-media; loop"
            allowfullscreen>
        </iframe>
    </div>

    <div class="max-w-7xl mx-auto space-y-8 relative z-10">

        <header class="text-center pt-6 pb-4 md:pt-10">
            <h1 class="text-6xl md:text-7xl font-black tracking-tighter uppercase neon-glow text-neon-primary transition-all duration-500" id="main-title">
                Assistente FF
            </h1>
            <h2 class="text-2xl md:text-3xl font-light text-neon-secondary mt-2 transition-all duration-500">
                M√≥dulo Cyber-Calibra√ß√£o V2.0 | Status: <span class="text-green-400 font-bold">ONLINE</span>
            </h2>
            <p class="mt-4 text-base text-gray-200 max-w-4xl mx-auto hud-card py-3 px-6 rounded-xl transition-all duration-500 border-none shadow-xl">
                SYSTEM_LOG 001: Clique nos controles para iniciar o diagn√≥stico e otimizar. üõ†Ô∏è
            </p>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            
            <div class="md:col-span-1 space-y-8">
                <section class="hud-card p-6 md:p-8 rounded-2xl space-y-8">
                    <h3 class="text-3xl font-bold text-neon-primary border-b border-neon-primary/30 pb-3">
                        <span class="text-neon-secondary">//</span> Painel de Controle
                    </h3>

                    <div class="space-y-6"> 
                        
                        <div class="flex items-center justify-between p-3 bg-gray-900/40 rounded-lg border-l-4 border-neon-primary/50 hover:border-neon-secondary transition">
                            <label class="text-lg font-medium text-gray-100">OTIMIZA√á√ÉO DE FPS</label>
                            <div id="toggle-optimization" class="modern-switch" onclick="toggleFeature('Optimization')"></div>
                        </div>

                        <div class="flex items-center justify-between p-3 bg-gray-900/40 rounded-lg border-l-4 border-neon-primary/50 hover:border-neon-secondary transition">
                            <label class="text-lg font-medium text-gray-100">ASSIST√äNCIA DE MIRA</label>
                            <div id="toggle-aimguide" class="modern-switch" onclick="toggleFeature('AimGuide')"></div>
                        </div>

                        <div class="flex items-center justify-between p-3 bg-gray-900/40 rounded-lg border-l-4 border-neon-primary/50 hover:border-neon-secondary transition">
                            <label class="text-lg font-medium text-gray-100">ANTI-RECOIL AVAN√áADO</label>
                            <div id="toggle-precision" class="modern-switch" onclick="toggleFeature('Precision')"></div>
                        </div>

                    </div>
                </section>
                
                <section class="hud-card p-6 md:p-8 rounded-2xl space-y-4 border-neon-secondary">
                    <label for="aim-precision-slider" class="text-xl font-bold text-neon-secondary flex justify-between items-center border-b border-neon-secondary/50 pb-2">
                        <span>SELETOR DE SENSIBILIDADE (DPI)</span>
                    </label>
                    <span id="aim-precision-value" class="block text-center text-5xl font-extrabold text-neon-secondary neon-glow transition-all duration-300">50%</span>
                    <input type="range" id="aim-precision-slider" min="0" max="100" value="50" oninput="updateAimPrecision(this.value)" class="w-full">
                </section>
            </div>


            <div class="md:col-span-2 space-y-6">
                
                <h3 class="text-3xl font-bold text-neon-primary border-b border-neon-primary/30 pb-3">
                    <span class="text-neon-secondary">//</span> Diagn√≥stico em Tempo Real
                </h3>

                <div id="section-optimization" class="hud-card p-6 rounded-xl section-simulation-panel border-l-4 border-neon-primary">
                    <h4 class="text-xl font-bold mb-4 text-neon-primary">STATUS > OTIMIZA√á√ÉO_N√öCLEO</h4>
                    <div id="optimization-simulation" class="text-lg font-mono space-y-3 terminal-mono p-0 bg-transparent">
                        <div id="opt-status-text" class="stable-status-text"></div>
                        <div class="grid grid-cols-2 gap-4 text-sm pt-2 border-t border-neon-secondary/20">
                            <p>FPS ATUAL: <span id="fps-counter" class="text-3xl text-neon-secondary neon-glow font-bold">30</span></p>
                            <p class="text-right">CARGA CPU: <span class="text-green-400">0.8%</span> | RAM: <span class="text-yellow-400">75%</span></p>
                        </div>
                        <div class="progress-bar">
                            <div id="opt-progress-fill" class="progress-fill"></div>
                        </div>
                    </div>
                </div>

                <div id="section-aimguide" class="hud-card p-6 rounded-xl section-simulation-panel border-l-4 border-neon-secondary">
                    <h4 class="text-xl font-bold mb-4 text-neon-primary">STATUS > ASSIST√äNCIA_MIRA</h4>
                    <div id="aimguide-simulation" class="text-center p-6 space-y-4 terminal-mono p-0 bg-transparent">
                        <div id="aim-status-text" class="text-xl stable-status-text mx-auto"></div>
                        <div class="flex justify-center py-4">
                            <svg id="aim-reticle" class="w-24 h-24" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g class="reticle-spin">
                                    <circle cx="50" cy="50" r="45" stroke="var(--neon-primary)" stroke-width="2" stroke-dasharray="10 5" stroke-opacity="0.7"/>
                                </g>
                                <g class="reticle-base" transform="translate(50, 50) scale(1) translate(-50, -50)">
                                    <line x1="10" y1="50" x2="90" y2="50" stroke="var(--neon-secondary)" stroke-width="2"/>
                                    <line x1="50" y1="10" x2="50" y2="90" stroke="var(--neon-secondary)" stroke-width="2"/>
                                    <circle cx="50" cy="50" r="5" fill="var(--neon-secondary)"/>
                                </g>
                                <text x="50" y="55" font-size="8" text-anchor="middle" fill="var(--neon-secondary)" font-family="Consolas, Monospace">BUSCA...</text>
                            </svg>
                        </div>
                    </div>
                </div>

                <div id="section-precision" class="hud-card p-6 rounded-xl section-simulation-panel border-l-4 border-neon-primary">
                    <h4 class="text-xl font-bold mb-4 text-neon-primary">STATUS > ANTI_RECOIL</h4>
                    <div id="precision-simulation" class="text-lg font-mono space-y-3 terminal-mono p-0 bg-transparent">
                        <div id="prec-status-text" class="stable-status-text"></div>
                        <div class="grid grid-cols-2 gap-4 text-sm pt-2 border-t border-neon-secondary/20">
                            <p>DPI SELECIONADO: <span id="prec-value" class="text-3xl text-neon-secondary neon-glow font-bold">50%</span></p>
                            <div class="text-right">
                                ESTABILIDADE: 
                                <span id="recoil-stabilizer" class="text-3xl font-black text-neon-secondary transition-all duration-300 animate-pulse inline-block ml-2">
                                    [ | | ]
                                </span>
                            </div>
                        </div>
                        <div class="progress-bar">
                            <div id="prec-progress-fill" class="progress-fill"></div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div id="section-gamebutton" class="py-10 flex justify-center">
            <button id="ff-launch-button"
               onclick="openFreeFireApp()"
               class="px-8 py-4 rounded-xl text-xl md:text-2xl font-extrabold uppercase transition duration-300 reinforced-button text-white">
                ‚ñ∂Ô∏è INICIAR FREE FIRE OTIMIZADO
            </button>
        </div>

        <footer class="text-center py-8 border-t border-neon-primary/20 mt-10 text-gray-500 text-sm">
            <p>M√≥dulo de Calibra√ß√£o **HFR-42** | Vers√£o **V10.0** | &copy; 2025 Assistente FF.</p>
        </footer>

    </div>

    <script>
        // Elementos do novo slider
        const slider = document.getElementById('aim-precision-slider');
        const valueDisplay = document.getElementById('aim-precision-value');

        // Estado inicial de todas as funcionalidades
        let appState = {
            Optimization: false,
            AimGuide: false,
            Precision: false,
            AimPrecisionPercentage: 50,
        };

        // --- FUN√á√ÉO CENTRAL: ATUALIZA√á√ÉO INSTANT√ÇNEA DE TEXTO ---
        // A fun√ß√£o de digita√ß√£o foi removida. O texto √© inserido de uma vez.
        function updateStatusText(element, text) {
            element.textContent = text;
        }
        
        function clearStatusText(element) {
            element.textContent = '';
        }


        // --- FUN√á√ÉO DE DEEP LINK (ABRIR APP DIRETO) ---
        function openFreeFireApp() {
            const fallbackUrl = "https://play.google.com/store/apps/details?id=com.dts.freefireth";
            const deepLinkUri = "com.dts.freefireth://"; 

            window.location.href = deepLinkUri;

            const timeout = setTimeout(() => {
                window.open(fallbackUrl, '_blank');
            }, 300);
        }

        // --- SIMULA√á√ÉO DE OTIMIZA√á√ÉO DO CELULAR ---
        async function startOptimizationSim() {
            const statusTextElement = document.getElementById('opt-status-text');
            const progressBar = document.getElementById('opt-progress-fill');
            const fpsCounter = document.getElementById('fps-counter'); 
            
            clearStatusText(statusTextElement);
            progressBar.style.width = '0%';
            progressBar.classList.add('active'); 
            fpsCounter.textContent = '30'; 
            
            const steps = [
                { delay: 0, progress: 0, text: 'PROCESSANDO | Iniciando varredura de n√∫cleo...', fps: 30 },
                { delay: 1000, progress: 30, text: 'EXECUTANDO | Limpando cache de fundo de RAM... [OK]', fps: 45 },
                { delay: 2000, progress: 65, text: 'EXECUTANDO | Ajustando prioridade de n√∫cleo da CPU...', fps: 55 },
                { delay: 3500, progress: 95, text: 'EXECUTANDO | Alocando banda de rede para Free Fire...', fps: 58 },
                { delay: 4000, progress: 100, text: 'CONCLU√çDO | Otimiza√ß√£o de sistema finalizada. Desempenho m√°ximo ATIVO.', fps: 60 },
            ];
            
            let accumulatedDelay = 0;

            for (const step of steps) {
                // Aguarda o tempo necess√°rio para sincronizar com o progresso
                await new Promise(resolve => setTimeout(resolve, step.delay - accumulatedDelay));
                accumulatedDelay = step.delay;

                // Atualiza√ß√£o instant√¢nea do texto
                updateStatusText(statusTextElement, step.text);
                
                progressBar.style.width = step.progress + '%';
                fpsCounter.style.transition = 'text-shadow 0.3s, color 0.3s';
                fpsCounter.textContent = step.fps; 
                fpsCounter.classList.add('neon-glow');
                
                setTimeout(() => fpsCounter.classList.remove('neon-glow'), 150);
            }

            progressBar.classList.remove('active');
        }
        
        // --- SIMULA√á√ÉO DE CALIBRA√á√ÉO DE MIRA ---
        async function startAimGuideSim() {
            const statusTextElement = document.getElementById('aim-status-text');
            const reticleElement = document.getElementById('aim-reticle');
            
            clearStatusText(statusTextElement);
            
            const spinGroup = reticleElement.querySelector('.reticle-spin');
            const pulseGroup = reticleElement.querySelector('.reticle-base');
            const textElement = reticleElement.querySelector('text');

            // FASE 1: Rota√ß√£o R√°pida e Busca
            spinGroup.style.animation = 'reticle-spin 0.5s linear infinite';
            pulseGroup.style.animation = 'reticle-pulse 0.5s ease-in-out infinite';
            textElement.textContent = 'BUSCA...';
            textElement.setAttribute('fill', 'var(--neon-secondary)');
            
            updateStatusText(statusTextElement, 'PROCESSANDO | Iniciando varredura de sensibilidade...');
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            // FASE 2: Calibra√ß√£o Fina
            updateStatusText(statusTextElement, 'EXECUTANDO | Ajustando par√¢metros de DPI e Sensibilidade (360¬∞)...');
            spinGroup.style.animation = 'reticle-spin 1.5s linear infinite';
            pulseGroup.style.animation = 'reticle-pulse 1.2s ease-in-out infinite';
            textElement.textContent = 'CALIBRANDO';
            await new Promise(resolve => setTimeout(resolve, 3000));
            
            // FASE 3: Finaliza√ß√£o e Bloqueio
            updateStatusText(statusTextElement, 'CONCLU√çDO | MIRA ASSISTIDA ATIVA! Sistema pronto para o jogo.');
            spinGroup.style.animation = 'none';
            pulseGroup.style.animation = 'none';
            textElement.textContent = 'LOCK';
            textElement.setAttribute('fill', 'var(--neon-primary)');
        }

        // --- SIMULA√á√ÉO DE AJUSTES DE PRECIS√ÉO ---
        async function startPrecisionSim() {
            const statusTextElement = document.getElementById('prec-status-text');
            const progressBar = document.getElementById('prec-progress-fill');
            const stabilizer = document.getElementById('recoil-stabilizer'); 
            const precValueDisplay = document.getElementById('prec-value');
            
            const currentPrecision = document.getElementById('aim-precision-value').textContent; 
            
            // 1. Reset Visual
            clearStatusText(statusTextElement);
            progressBar.style.width = '0%';
            progressBar.classList.add('active'); 
            stabilizer.classList.add('animate-pulse'); 
            stabilizer.classList.remove('neon-glow');
            stabilizer.textContent = '[ | | ]'; 
            precValueDisplay.textContent = currentPrecision; 
            
            // 2. Defini√ß√£o dos passos sequenciais
            const simulationSteps = [
                { text: `PROCESSANDO | Analisando o controle de Recoil para: ${currentPrecision}`, progress: 0, stabilizer: '[ | | ]', wait: 500 },
                { text: 'EXECUTANDO | Inicializando algoritmo Anti-Recoil (Fase 1/3)...', progress: 30, stabilizer: '[ > < ]', wait: 1500 },
                { text: 'EXECUTANDO | An√°lise de Dispers√£o de Proj√©teis em tempo real...', progress: 60, stabilizer: '[ > | < ]', wait: 1500 },
                { text: 'EXECUTANDO | Configurando estabilidade do girosc√≥pio (Anti-Vibra√ß√£o)...', progress: 90, stabilizer: '[ | | ]', wait: 1000 },
                { text: `CONCLU√çDO | Ajustes Finais executados. Recoil otimizado em ${currentPrecision}.`, progress: 100, stabilizer: '[ LOCK ]', wait: 0 },
            ];
            
            // 3. Execu√ß√£o sequencial
            let accumulatedWait = 0;
            for (const step of simulationSteps) {
                // Aguarda o tempo
                await new Promise(resolve => setTimeout(resolve, step.wait));
                
                // Atualiza√ß√£o instant√¢nea do texto
                updateStatusText(statusTextElement, step.text);

                // Atualiza a barra de progresso e o visual do estabilizador
                progressBar.style.width = step.progress + '%';
                stabilizer.textContent = step.stabilizer;
            }
            
            // 4. Finaliza√ß√£o visual
            progressBar.classList.remove('active');
            stabilizer.classList.add('neon-glow');
            stabilizer.classList.remove('animate-pulse');
        }


        // --- L√ìGICA DE INTERFACE (Toggles e Slider) ---

        function updateSliderVisual(value) {
            const percentage = value + '%';
            slider.style.background = `linear-gradient(to right, var(--neon-secondary) ${percentage}, var(--bg-inactive) ${percentage})`;
        }

        function updateAimPrecision(value) {
            appState.AimPrecisionPercentage = parseInt(value);
            valueDisplay.textContent = `${appState.AimPrecisionPercentage}%`;
            
            const precValueDisplay = document.getElementById('prec-value');
            if(precValueDisplay) {
                precValueDisplay.textContent = `${appState.AimPrecisionPercentage}%`;
            }
            
            updateSliderVisual(appState.AimPrecisionPercentage);
        }

        function toggleFeature(feature) {
            const willBeActive = !appState[feature]; 
            appState[feature] = willBeActive;

            const toggleId = `toggle-${feature.toLowerCase()}`;
            const toggleElement = document.getElementById(toggleId);

            if (toggleElement) {
                toggleElement.classList.toggle('active', willBeActive);
            }

            const sectionId = `section-${feature.toLowerCase()}`;
            const sectionElement = document.getElementById(sectionId);

            if (sectionElement) {
                const statusTextId = `${feature.toLowerCase().slice(0, 4)}-status-text`;
                const statusTextElement = document.getElementById(statusTextId);

                if (willBeActive) {
                    sectionElement.style.display = 'block';
                    sectionElement.classList.remove('section-enter-animation'); 
                    void sectionElement.offsetWidth;
                    sectionElement.classList.add('section-enter-animation');

                    switch (feature) {
                        case 'Optimization':
                            startOptimizationSim();
                            break;
                        case 'AimGuide':
                            startAimGuideSim();
                            break;
                        case 'Precision':
                            startPrecisionSim();
                            break;
                    }
                } else {
                    sectionElement.classList.remove('section-enter-animation');
                    sectionElement.style.display = 'none'; 
                    
                    // Limpa o texto de status
                    clearStatusText(statusTextElement);
                    
                    // Reset Visual
                    if (feature === 'Optimization' && document.getElementById('opt-progress-fill')) {
                         document.getElementById('opt-progress-fill').classList.remove('active');
                         document.getElementById('fps-counter').textContent = '30';
                    }
                    if (feature === 'Precision' && document.getElementById('prec-progress-fill')) {
                         document.getElementById('prec-progress-fill').classList.remove('active');
                         const stabilizer = document.getElementById('recoil-stabilizer');
                         stabilizer.textContent = '[ | | ]';
                         stabilizer.classList.remove('neon-glow');
                         stabilizer.classList.add('animate-pulse');
                    }
                    if (feature === 'AimGuide' && document.getElementById('aim-reticle')) {
                        const reticleElement = document.getElementById('aim-reticle');
                        reticleElement.querySelector('.reticle-spin').style.animation = 'none';
                        reticleElement.querySelector('.reticle-base').style.animation = 'none';
                        reticleElement.querySelector('text').textContent = 'BUSCA...'; 
                        reticleElement.querySelector('text').setAttribute('fill', 'var(--neon-secondary)');
                    }
                }
            }
        }

        function initializeApp() {
            if (slider && valueDisplay) {
                updateAimPrecision(appState.AimPrecisionPercentage);
            }
        }

        document.addEventListener('DOMContentLoaded', initializeApp);

    </script>
</body>
</html>
